{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js!F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\login\\LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\login\\LoginPage.vue","mtime":1591836639874},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnRuOiB7CiAgICAgICAgaWNvbjogJycsCiAgICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgICB0ZXh0OiAn55m7IOW9lScKICAgICAgfSwKICAgICAgbWZvcm06IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dkOiAnJywKICAgICAgICB0eXBlOiAyCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnmbvlvZXotKblj7cnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55m75b2V5a+G56CBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IFt7CiAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgbGFiZWw6ICfnsbvlnos6IOWtpueUn+eZu+W9lScKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAxLAogICAgICAgIGxhYmVsOiAn57G75Z6LOiDmlZnluIjnmbvlvZUnCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogNSwKICAgICAgICBsYWJlbDogJ+exu+Weizog5qCh5LyB5Lq65ZGY55m75b2VJwogICAgICB9XQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5pS55Y+Y55m75b2V5oyJ6ZKu54q25oCBCiAgICBzZXRMb2FkaW5CdG5TdGF0dXM6IGZ1bmN0aW9uIHNldExvYWRpbkJ0blN0YXR1cyhzdGF0dXMpIHsKICAgICAgdGhpcy5idG4uc3RhdHVzID0gc3RhdHVzOwogICAgICB0aGlzLmJ0bi5pY29uID0gc3RhdHVzID8gJ2VsLWljb24tbG9hZGluZycgOiAnJzsKICAgICAgdGhpcy5idG4udGV4dCA9IHN0YXR1cyA/ICfnmbvlvZXkuK0uLi4nIDogJ+eZuyDlvZUnOwogICAgfSwKICAgIC8v55m75b2V6LSm5Y+3CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNldExvYWRpbkJ0blN0YXR1cyhmYWxzZSk7CiAgICAgIHRoaXMuJHJlZnMubWZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpcy5zZXRMb2FkaW5CdG5TdGF0dXModHJ1ZSk7CgogICAgICAgICAgdmFyIG1zZywgbXR5cGU7CiAgICAgICAgICB2YXIgbWRhdGEgPSB7CiAgICAgICAgICAgICdhY2NvdW50JzogX3RoaXMubWZvcm0udXNlcm5hbWUsCiAgICAgICAgICAgICdwYXNzd29yZCc6IF90aGlzLm1mb3JtLnBhc3N3ZCwKICAgICAgICAgICAgJ3JvbGUnOiBfdGhpcy5tZm9ybS50eXBlCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLiRodHRwLnBvc3QoJy91c2VyL2xvZ2luJywgbWRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHsKICAgICAgICAgICAgICBtc2cgPSAn55m75b2V5oiQ5Yqf77yBJzsKICAgICAgICAgICAgICBtdHlwZSA9ICdzdWNjZXNzJzsKCiAgICAgICAgICAgICAgX3RoaXMuJGNvb2tpZXMuc2V0KCJ0b2tlbiIsIGRhdGEuZGF0YS50b2tlbik7CgogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndHlwZScsIF90aGlzLm1mb3JtLnR5cGUpOwoKICAgICAgICAgICAgICBfdGhpcy4kc2V0QXV0aChkYXRhLmRhdGEudG9rZW4pOwoKICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgcGF0aDogJy9tYW5hZ2UnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbXNnID0gJ+eZu+W9leWksei0pe+8gei0puWPt+aIluWvhueggemUmeivryc7CiAgICAgICAgICAgICAgbXR5cGUgPSAnd2FybmluZyc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIG1zZyA9ICfor7fmsYLplJnor6/vvIEnOwogICAgICAgICAgICBtdHlwZSA9ICdlcnJvcic7CiAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0TG9hZGluQnRuU3RhdHVzKGZhbHNlKTsKCiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiBtdHlwZSwKICAgICAgICAgICAgICBtZXNzYWdlOiBtc2csCiAgICAgICAgICAgICAgY2VudGVyOiB0cnVlLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <el-form ref=\"mform\" :model=\"mform\" :rules=\"rules\">\r\n        <el-form-item class=\"login-margin-top\" prop=\"username\">\r\n            <el-input v-model=\"mform.username\" prefix-icon=\"el-icon-user\" placeholder=\"请输入账号\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"passwd\">\r\n            <el-input v-model=\"mform.passwd\" prefix-icon=\"el-icon-lock\" placeholder=\"请输入密码\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item class=\"login-full-width\">\r\n            <el-select v-model=\"mform.type\" placeholder=\"请选择\" style=\"width:100%\">\r\n                <el-option\r\n                    v-for=\"item in options\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                </el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button class=\"login-btn\" :disabled=\"btn.status\" :icon=\"btn.icon\" type=\"primary\" @click=\"login\" round> {{ btn.text }} </el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            btn: {\r\n                icon: '',\r\n                status: false,\r\n                text: '登 录'\r\n            },\r\n            mform: {\r\n                username: '',\r\n                passwd: '',\r\n                type: 2\r\n            },\r\n            rules: {\r\n                username: [{ required: true, message: '请输入登录账号', trigger: 'blur' }],\r\n                passwd: [{ required: true, message: '请输入登录密码', trigger: 'blur' }]\r\n            },\r\n            options: [\r\n                {\r\n                    value: 2,\r\n                    label: '类型: 学生登录'\r\n                },\r\n                {\r\n                    value: 1,\r\n                    label: '类型: 教师登录'\r\n                },\r\n                {\r\n                    value: 5,\r\n                    label: '类型: 校企人员登录'\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        //改变登录按钮状态\r\n        setLoadinBtnStatus(status) {\r\n            this.btn.status = status;\r\n            this.btn.icon = (status) ? 'el-icon-loading': '';\r\n            this.btn.text = (status) ? '登录中...': '登 录';\r\n        },\r\n        //登录账号\r\n        login() {\r\n            this.setLoadinBtnStatus(false);\r\n\r\n\r\n            this.$refs.mform.validate(valid => {\r\n                if (valid) {\r\n                    this.setLoadinBtnStatus(true);\r\n                    let msg, mtype;\r\n                    let mdata = {\r\n                        'account': this.mform.username,\r\n                        'password': this.mform.passwd,\r\n                        'role': this.mform.type\r\n                    };\r\n                    \r\n                    this.$http.post('/user/login',mdata)\r\n                        .then(response =>{\r\n                            let data = response.data;\r\n                            console.log(data);\r\n                            if (data.code == 0){\r\n                                msg = '登录成功！';\r\n                                mtype = 'success';\r\n                                this.$cookies.set(\"token\", data.data.token);\r\n                                window.localStorage.setItem('token', data.data.token);\r\n                                window.localStorage.setItem('type', this.mform.type);\r\n                                this.$setAuth(data.data.token);\r\n                                this.$router.push({path: '/manage'});\r\n                            } else {\r\n                                msg = '登录失败！账号或密码错误';\r\n                                mtype = 'warning';\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error);\r\n                            msg = '请求错误！';\r\n                            mtype = 'error'\r\n                            \r\n                        })\r\n                        .finally(() => {\r\n                            this.setLoadinBtnStatus(false);\r\n                            this.$message({\r\n                                type: mtype,\r\n                                message: msg,\r\n                                center: true,\r\n                                duration: 2500\r\n                                });\r\n                        });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/components/login"}]}