{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js!F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\manage\\StatisticsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\manage\\StatisticsPage.vue","mtime":1593142174148},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVzdGlvbm5hcmllRGF0YTogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy4kZW1pdCgnc2V0QWN0aXZlTWVudUl0ZW0nLCAnL21hbmFnZS9zdGF0aXN0aWNzJyk7CiAgICB0aGlzLmdldFF1ZXN0aW9ubmFpcmVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+ivt+axgumXruWNt+S/oeaBrwogICAgZ2V0UXVlc3Rpb25uYWlyZURhdGE6IGZ1bmN0aW9uIGdldFF1ZXN0aW9ubmFpcmVEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kaHR0cC5nZXQoJy91c2VyL215cXVlc3Rpb25uYWlyZScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHZhciBxdWVzdGlvbkxpc3QgPSBbXTsKCiAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgZGF0YS5kYXRhLm15X3F1ZXN0aW9ubmFpcmUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAyKSB7CiAgICAgICAgICAgICAgaXRlbS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgaXRlbS5zdGF0dXMgPSAn5bey5oiq5q2iJzsKICAgICAgICAgICAgICBpdGVtLmV4ID0gW3sKICAgICAgICAgICAgICAgIGtleTogJ1vkvZzogIVd77yaJywKICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmZvdW5kZXIKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBrZXk6ICdb6K++5Y+3Xe+8micsCiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5sZXNzb25fY29kZQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGtleTogJ1vkuJPkuJpd77yaJywKICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLm1ham9yCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAga2V5OiAnW+aXtumXtF3vvJonLAogICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uY3JlYXRlX3RpbWUgKyAnLScgKyBpdGVtLmVuZF90aW1lCiAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgcXVlc3Rpb25MaXN0LnB1c2goaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2cocXVlc3Rpb25MaXN0KTsKICAgICAgICAgIF90aGlzLnF1ZXN0aW9ubmFyaWVEYXRhID0gcXVlc3Rpb25MaXN0OwogICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jb2RlID09IDIpIHsKICAgICAgICAgIF90aGlzLiRsb2dvdXQoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCdnZXRRdWVzdGlvbm5haXJlRGF0YUVycm9yJywgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+i3s+i9rOmXruWNt+WIhuaekOmhtemdogogICAgZ29fYW5hbHl6ZTogZnVuY3Rpb24gZ29fYW5hbHl6ZShpZCwgdHlwZSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2FuYWx5emVfcGFnZScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBxaWQ6IGlkLAogICAgICAgICAgdHlwZTogdHlwZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["StatisticsPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,iBAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,OANA,qBAMA;AACA,SAAA,KAAA,CAAA,mBAAA,EAAA,oBAAA;AACA,SAAA,oBAAA;AACA,GATA;AAUA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,oBAFA,kCAEA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,uBAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,YAAA,YAAA,GAAA,EAAA;;AACA,YAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,gBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,gBAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,cAAA,IAAA,CAAA,OAAA,GAAA,KAAA;AACA,cAAA,IAAA,CAAA,MAAA,GAAA,KAAA;AACA,cAAA,IAAA,CAAA,EAAA,GAAA,CACA;AAAA,gBAAA,GAAA,EAAA,OAAA;AAAA,gBAAA,KAAA,EAAA,IAAA,CAAA;AAAA,eADA,EAEA;AAAA,gBAAA,GAAA,EAAA,OAAA;AAAA,gBAAA,KAAA,EAAA,IAAA,CAAA;AAAA,eAFA,EAGA;AAAA,gBAAA,GAAA,EAAA,OAAA;AAAA,gBAAA,KAAA,EAAA,IAAA,CAAA;AAAA,eAHA,EAIA;AAAA,gBAAA,GAAA,EAAA,OAAA;AAAA,gBAAA,KAAA,EAAA,IAAA,CAAA,WAAA,GAAA,GAAA,GAAA,IAAA,CAAA;AAAA,eAJA,CAAA;AAMA,cAAA,YAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,WAZA;AAaA,UAAA,OAAA,CAAA,GAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,iBAAA,GAAA,YAAA;AACA,SAhBA,MAgBA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA;AACA;AACA,OAvBA,EAwBA,KAxBA,CAwBA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,2BAAA,EAAA,KAAA;AACA,OA1BA;AA2BA,KA9BA;AA+BA;AACA,IAAA,UAhCA,sBAgCA,EAhCA,EAgCA,IAhCA,EAgCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,GAAA,EAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA;AAAA,OAAA;AACA;AAlCA;AAVA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :span=\"24\" class=\"grid-row\">\r\n            <el-timeline>\r\n\r\n\r\n                <el-timeline-item v-for=\"(item, index) in questionnarieData\" :key=\"item.id\" :timestamp=\"item.time\" placement=\"top\">\r\n                    <div>\r\n                        <el-card shadow=\"hover\">\r\n                            <div>{{ index + 1 }}. [ID]：{{ item.id }} - [状态]：{{ item.status }}</div>\r\n                            <h3 style=\"clear:both; margin-top: 32px; margin-left: 20px\"> 标题：{{ item.title }} </h3>\r\n                            <el-table :data=\"item.ex\" :show-header=\"false\">\r\n                                <el-table-column prop=\"key\" align=\"center\" label=\"key\" width=\"100\"></el-table-column>\r\n                                <el-table-column prop=\"value\" label=\"value\"></el-table-column>\r\n                            </el-table>\r\n                            <el-button class=\"st-btn\" @click=\"go_analyze(item.id,item.type)\" type=\"primary\" round>查看统计结果</el-button>\r\n                        </el-card>\r\n                    </div>\r\n                </el-timeline-item>\r\n\r\n            </el-timeline>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                questionnarieData: [],\r\n            }\r\n        },\r\n        mounted() {\r\n            this.$emit('setActiveMenuItem', '/manage/statistics');\r\n            this.getQuestionnaireData();\r\n        },\r\n        methods: {\r\n            //请求问卷信息\r\n            getQuestionnaireData() {\r\n                this.$http.get('/user/myquestionnaire')\r\n                    .then(response =>{\r\n                        let data = response.data;\r\n                        let questionList = []\r\n                        if (data.code === 0) {\r\n                            data.data.my_questionnaire.forEach((item,index) => {\r\n                                if (item.status === 2){\r\n                                    item.checked = false;\r\n                                    item.status = '已截止'\r\n                                    item.ex = [\r\n                                        {key: '[作者]：', value: item.founder},\r\n                                        {key: '[课号]：', value: item.lesson_code},\r\n                                        {key: '[专业]：', value: item.major},\r\n                                        {key: '[时间]：', value: item.create_time + '-' + item.end_time}\r\n                                    ];\r\n                                    questionList.push(item)\r\n                                }\r\n                            });\r\n                            console.log(questionList)\r\n                            this.questionnarieData = questionList;\r\n                        } else if (data.code == 2) {\r\n                            this.$logout();\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.log('getQuestionnaireDataError', error);\r\n                    });\r\n            },\r\n            //跳转问卷分析页面\r\n            go_analyze(id,type){\r\n                this.$router.push({name: 'analyze_page', params: {qid: id,type: type}})\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.st-btn {\r\n    margin-top: 25px;\r\n    margin-bottom: 25px;\r\n    float: right;\r\n}\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/manage"}]}