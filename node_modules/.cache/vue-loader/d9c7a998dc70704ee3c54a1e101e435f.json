{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\login\\LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\login\\LoginPage.vue","mtime":1591836639874},{"path":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGJ0bjogew0KICAgICAgICAgICAgICAgIGljb246ICcnLA0KICAgICAgICAgICAgICAgIHN0YXR1czogZmFsc2UsDQogICAgICAgICAgICAgICAgdGV4dDogJ+eZuyDlvZUnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgbWZvcm06IHsNCiAgICAgICAgICAgICAgICB1c2VybmFtZTogJycsDQogICAgICAgICAgICAgICAgcGFzc3dkOiAnJywNCiAgICAgICAgICAgICAgICB0eXBlOiAyDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcnVsZXM6IHsNCiAgICAgICAgICAgICAgICB1c2VybmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnmbvlvZXotKblj7cnLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgICAgICAgICAgcGFzc3dkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeZu+W9leWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9XQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIG9wdGlvbnM6IFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAyLA0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+exu+Weizog5a2m55Sf55m75b2VJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMSwNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICfnsbvlnos6IOaVmeW4iOeZu+W9lScNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDUsDQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn57G75Z6LOiDmoKHkvIHkurrlkZjnmbvlvZUnDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgXQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC8v5pS55Y+Y55m75b2V5oyJ6ZKu54q25oCBDQogICAgICAgIHNldExvYWRpbkJ0blN0YXR1cyhzdGF0dXMpIHsNCiAgICAgICAgICAgIHRoaXMuYnRuLnN0YXR1cyA9IHN0YXR1czsNCiAgICAgICAgICAgIHRoaXMuYnRuLmljb24gPSAoc3RhdHVzKSA/ICdlbC1pY29uLWxvYWRpbmcnOiAnJzsNCiAgICAgICAgICAgIHRoaXMuYnRuLnRleHQgPSAoc3RhdHVzKSA/ICfnmbvlvZXkuK0uLi4nOiAn55m7IOW9lSc7DQogICAgICAgIH0sDQogICAgICAgIC8v55m75b2V6LSm5Y+3DQogICAgICAgIGxvZ2luKCkgew0KICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5CdG5TdGF0dXMoZmFsc2UpOw0KDQoNCiAgICAgICAgICAgIHRoaXMuJHJlZnMubWZvcm0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNldExvYWRpbkJ0blN0YXR1cyh0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG1zZywgbXR5cGU7DQogICAgICAgICAgICAgICAgICAgIGxldCBtZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdhY2NvdW50JzogdGhpcy5tZm9ybS51c2VybmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHRoaXMubWZvcm0ucGFzc3dkLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiB0aGlzLm1mb3JtLnR5cGUNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnL3VzZXIvbG9naW4nLG1kYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9ICfnmbvlvZXmiJDlip/vvIEnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdHlwZSA9ICdzdWNjZXNzJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29va2llcy5zZXQoInRva2VuIiwgZGF0YS5kYXRhLnRva2VuKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIGRhdGEuZGF0YS50b2tlbik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndHlwZScsIHRoaXMubWZvcm0udHlwZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldEF1dGgoZGF0YS5kYXRhLnRva2VuKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvbWFuYWdlJ30pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9ICfnmbvlvZXlpLHotKXvvIHotKblj7fmiJblr4bnoIHplJnor68nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdHlwZSA9ICd3YXJuaW5nJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gJ+ivt+axgumUmeivr++8gSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXR5cGUgPSAnZXJyb3InDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluQnRuU3RhdHVzKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbXR5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginPage.vue","sourceRoot":"src/components/login","sourcesContent":["<template>\r\n    <el-form ref=\"mform\" :model=\"mform\" :rules=\"rules\">\r\n        <el-form-item class=\"login-margin-top\" prop=\"username\">\r\n            <el-input v-model=\"mform.username\" prefix-icon=\"el-icon-user\" placeholder=\"请输入账号\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"passwd\">\r\n            <el-input v-model=\"mform.passwd\" prefix-icon=\"el-icon-lock\" placeholder=\"请输入密码\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item class=\"login-full-width\">\r\n            <el-select v-model=\"mform.type\" placeholder=\"请选择\" style=\"width:100%\">\r\n                <el-option\r\n                    v-for=\"item in options\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                </el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button class=\"login-btn\" :disabled=\"btn.status\" :icon=\"btn.icon\" type=\"primary\" @click=\"login\" round> {{ btn.text }} </el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            btn: {\r\n                icon: '',\r\n                status: false,\r\n                text: '登 录'\r\n            },\r\n            mform: {\r\n                username: '',\r\n                passwd: '',\r\n                type: 2\r\n            },\r\n            rules: {\r\n                username: [{ required: true, message: '请输入登录账号', trigger: 'blur' }],\r\n                passwd: [{ required: true, message: '请输入登录密码', trigger: 'blur' }]\r\n            },\r\n            options: [\r\n                {\r\n                    value: 2,\r\n                    label: '类型: 学生登录'\r\n                },\r\n                {\r\n                    value: 1,\r\n                    label: '类型: 教师登录'\r\n                },\r\n                {\r\n                    value: 5,\r\n                    label: '类型: 校企人员登录'\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        //改变登录按钮状态\r\n        setLoadinBtnStatus(status) {\r\n            this.btn.status = status;\r\n            this.btn.icon = (status) ? 'el-icon-loading': '';\r\n            this.btn.text = (status) ? '登录中...': '登 录';\r\n        },\r\n        //登录账号\r\n        login() {\r\n            this.setLoadinBtnStatus(false);\r\n\r\n\r\n            this.$refs.mform.validate(valid => {\r\n                if (valid) {\r\n                    this.setLoadinBtnStatus(true);\r\n                    let msg, mtype;\r\n                    let mdata = {\r\n                        'account': this.mform.username,\r\n                        'password': this.mform.passwd,\r\n                        'role': this.mform.type\r\n                    };\r\n                    \r\n                    this.$http.post('/user/login',mdata)\r\n                        .then(response =>{\r\n                            let data = response.data;\r\n                            console.log(data);\r\n                            if (data.code == 0){\r\n                                msg = '登录成功！';\r\n                                mtype = 'success';\r\n                                this.$cookies.set(\"token\", data.data.token);\r\n                                window.localStorage.setItem('token', data.data.token);\r\n                                window.localStorage.setItem('type', this.mform.type);\r\n                                this.$setAuth(data.data.token);\r\n                                this.$router.push({path: '/manage'});\r\n                            } else {\r\n                                msg = '登录失败！账号或密码错误';\r\n                                mtype = 'warning';\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error);\r\n                            msg = '请求错误！';\r\n                            mtype = 'error'\r\n                            \r\n                        })\r\n                        .finally(() => {\r\n                            this.setLoadinBtnStatus(false);\r\n                            this.$message({\r\n                                type: mtype,\r\n                                message: msg,\r\n                                center: true,\r\n                                duration: 2500\r\n                                });\r\n                        });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}