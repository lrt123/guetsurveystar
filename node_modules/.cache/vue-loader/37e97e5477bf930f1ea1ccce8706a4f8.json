{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\manage\\StatisticsPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\manage\\StatisticsPage.vue","mtime":1593142174148},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHF1ZXN0aW9ubmFyaWVEYXRhOiBbXSwKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRBY3RpdmVNZW51SXRlbScsICcvbWFuYWdlL3N0YXRpc3RpY3MnKTsKICAgICAgICB0aGlzLmdldFF1ZXN0aW9ubmFpcmVEYXRhKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8v6K+35rGC6Zeu5Y235L+h5oGvCiAgICAgICAgZ2V0UXVlc3Rpb25uYWlyZURhdGEoKSB7CiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KCcvdXNlci9teXF1ZXN0aW9ubmFpcmUnKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIGxldCBxdWVzdGlvbkxpc3QgPSBbXQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLm15X3F1ZXN0aW9ubmFpcmUuZm9yRWFjaCgoaXRlbSxpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YXR1cyA9ICflt7LmiKrmraInCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5leCA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ1vkvZzogIVd77yaJywgdmFsdWU6IGl0ZW0uZm91bmRlcn0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtrZXk6ICdb6K++5Y+3Xe+8micsIHZhbHVlOiBpdGVtLmxlc3Nvbl9jb2RlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2tleTogJ1vkuJPkuJpd77yaJywgdmFsdWU6IGl0ZW0ubWFqb3J9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a2V5OiAnW+aXtumXtF3vvJonLCB2YWx1ZTogaXRlbS5jcmVhdGVfdGltZSArICctJyArIGl0ZW0uZW5kX3RpbWV9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbkxpc3QucHVzaChpdGVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocXVlc3Rpb25MaXN0KQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9ubmFyaWVEYXRhID0gcXVlc3Rpb25MaXN0OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jb2RlID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbG9nb3V0KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldFF1ZXN0aW9ubmFpcmVEYXRhRXJyb3InLCBlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIC8v6Lez6L2s6Zeu5Y235YiG5p6Q6aG16Z2iCiAgICAgICAgZ29fYW5hbHl6ZShpZCx0eXBlKXsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdhbmFseXplX3BhZ2UnLCBwYXJhbXM6IHtxaWQ6IGlkLHR5cGU6IHR5cGV9fSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["StatisticsPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StatisticsPage.vue","sourceRoot":"src/components/manage","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :span=\"24\" class=\"grid-row\">\r\n            <el-timeline>\r\n\r\n\r\n                <el-timeline-item v-for=\"(item, index) in questionnarieData\" :key=\"item.id\" :timestamp=\"item.time\" placement=\"top\">\r\n                    <div>\r\n                        <el-card shadow=\"hover\">\r\n                            <div>{{ index + 1 }}. [ID]：{{ item.id }} - [状态]：{{ item.status }}</div>\r\n                            <h3 style=\"clear:both; margin-top: 32px; margin-left: 20px\"> 标题：{{ item.title }} </h3>\r\n                            <el-table :data=\"item.ex\" :show-header=\"false\">\r\n                                <el-table-column prop=\"key\" align=\"center\" label=\"key\" width=\"100\"></el-table-column>\r\n                                <el-table-column prop=\"value\" label=\"value\"></el-table-column>\r\n                            </el-table>\r\n                            <el-button class=\"st-btn\" @click=\"go_analyze(item.id,item.type)\" type=\"primary\" round>查看统计结果</el-button>\r\n                        </el-card>\r\n                    </div>\r\n                </el-timeline-item>\r\n\r\n            </el-timeline>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                questionnarieData: [],\r\n            }\r\n        },\r\n        mounted() {\r\n            this.$emit('setActiveMenuItem', '/manage/statistics');\r\n            this.getQuestionnaireData();\r\n        },\r\n        methods: {\r\n            //请求问卷信息\r\n            getQuestionnaireData() {\r\n                this.$http.get('/user/myquestionnaire')\r\n                    .then(response =>{\r\n                        let data = response.data;\r\n                        let questionList = []\r\n                        if (data.code === 0) {\r\n                            data.data.my_questionnaire.forEach((item,index) => {\r\n                                if (item.status === 2){\r\n                                    item.checked = false;\r\n                                    item.status = '已截止'\r\n                                    item.ex = [\r\n                                        {key: '[作者]：', value: item.founder},\r\n                                        {key: '[课号]：', value: item.lesson_code},\r\n                                        {key: '[专业]：', value: item.major},\r\n                                        {key: '[时间]：', value: item.create_time + '-' + item.end_time}\r\n                                    ];\r\n                                    questionList.push(item)\r\n                                }\r\n                            });\r\n                            console.log(questionList)\r\n                            this.questionnarieData = questionList;\r\n                        } else if (data.code == 2) {\r\n                            this.$logout();\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.log('getQuestionnaireDataError', error);\r\n                    });\r\n            },\r\n            //跳转问卷分析页面\r\n            go_analyze(id,type){\r\n                this.$router.push({name: 'analyze_page', params: {qid: id,type: type}})\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.st-btn {\r\n    margin-top: 25px;\r\n    margin-bottom: 25px;\r\n    float: right;\r\n}\r\n\r\n</style>\r\n"]}]}