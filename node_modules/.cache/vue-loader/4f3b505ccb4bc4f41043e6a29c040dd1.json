{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\questionnaire\\ShareView.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\questionnaire\\ShareView.vue","mtime":1593264518982},{"path":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwcmV2aWV3IGZyb20gIi4vcHJldmlldyI7CmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6e3ByZXZpZXd9LAogICAgbmFtZTogIlNoYXJlVmlldyIsCiAgICBwcm9wczp7CiAgICAgICAgcXVlc3Rpb25JbmZvOkFycmF5LAogICAgICAgIGNvdXJzZU5vOlN0cmluZywKICAgICAgICBsZXNzb25ObzpTdHJpbmcKICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBkZXRhaWxWaXNpYmxlOmZhbHNlLAogICAgICAgICAgICBxdWVzdGlvbkxpc3Q6W10sCiAgICAgICAgICAgIHF1ZXN0aW9ubmFpcmU6e30sCiAgICAgICAgICAgIHNlbmRfdG86MCwKICAgICAgICAgICAgcXVlc3Rpb25uYWlyZVR5cGU6MAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBwcmV2aWV3KGlkKXsKICAgICAgICAgICAgdGhpcy5mZXRjaERhdGEoaWQpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucXVlc3Rpb25uYWlyZSkKICAgICAgICAgICAgdGhpcy5kZXRhaWxWaXNpYmxlID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgZmV0Y2hEYXRhKGlkKSB7CgogICAgICAgICAgICB0aGlzLiRodHRwLmdldCgiL3F1ZXN0aW9ubmFpcmUvIiArIGlkLCB7fSkudGhlbigocmVzKSA9PiB7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uTGlzdCA9IFtdCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcExpc3QgPSBkYXRhLnF1ZXN0aW9ucwogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGRhdGEubGVzc29uX2luZm8ubGVzc29uX2NvZGUpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9ubmFpcmUubGVzc29uTm8gPSAidW5kZWZpbmVkIgogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9ubmFpcmUubGVzc29uTm8gPSBkYXRhLmxlc3Nvbl9pbmZvLmxlc3Nvbl9jb2RlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25uYWlyZS5xdWVzdGlvbm5haXJlVGl0bGUgPSBkYXRhLnRpdGxlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbm5haXJlVHlwZSA9IGRhdGEudHlwZQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZF90byA9IGRhdGEuc2VuZFRvCiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRlbXBMaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uZVF1ZXN0aW9uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25JbmRleDogdC5pbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQm94U2VsZWN0ZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvblRpdGxlOiB0LmRlc2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbk51bGxhYmxlOiB0Lm51bGxhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25UeXBlOiB0LnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3Vyc2VHb2FsOiB0LnRhcmdldF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uT3B0aW9uczogdC5pdGVtcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25MaXN0LnB1c2gob25lUXVlc3Rpb24pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHttZXNzYWdlOiAi6Zeu5Y235bey6K+75Y+WIiwgZHVyYXRpb246IDEwMDB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7bWVzc2FnZTogImNvZGUhPTDvvIHor7vlj5blpLHotKXvvIEiLCBkdXJhdGlvbjogMTAwMH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25MaXN0ID0gW10KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe21lc3NhZ2U6ICLkvLzkuY7msqHmnInorr7nva7pgInpobkiLCBkdXJhdGlvbjogMTAwMH0pCiAgICAgICAgICAgIH0pCgogICAgICAgIH0sCiAgICAgICAgZmFzdGNyZWF0ZShpZCl7CiAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnL3F1ZXN0aW9ubmFpcmUvY2xvbmUnLHsKICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgIG5vOiB0aGlzLmxlc3Nvbk5vCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCApewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAncXVlc3Rpb25uYWlyZV9lZGl0X3BhZ2UnLAogICAgICAgICAgICAgICAgICAgIHBhcmFtczp7cWlkOiByZXMuZGF0YS5kYXRhLmlkfX0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC8vIHRoaXMuZmV0Y2hEYXRhKGlkKQogICAgICAgICAgICAvLyB0aGlzLiRodHRwLnBvc3QoJy9xdWVzdGlvbm5haXJlL2NyZWF0ZScsIHsKICAgICAgICAgICAgLy8gICAgICd0eXBlJzogdGhpcy5xdWVzdGlvbm5haXJlVHlwZSwKICAgICAgICAgICAgLy8gICAgICd0aXRsZSc6IHRoaXMucXVlc3Rpb25uYWlyZS5xdWVzdGlvbm5haXJlVGl0bGUsCiAgICAgICAgICAgIC8vICAgICAnc2VuZF90byc6IHRoaXMuc2VuZF90bwogICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAvLyAgICAgLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgICAgIC8vICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAvLyAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCkgewogICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ3F1ZXN0aW9ubmFpcmVfZWRpdF9wYWdlJywKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHFpZDogZGF0YS5kYXRhLmlkLAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRpdGxlOnRoaXMucXVlc3Rpb25uYWlyZS5xdWVzdGlvbm5haXJlVGl0bGUsCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdHlwZTp0aGlzLnF1ZXN0aW9ubmFpcmVUeXBlLAogICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uTGlzdDp0aGlzLnF1ZXN0aW9uTGlzdCwKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb3Vyc2VObzp0aGlzLmNvdXJzZU5vCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH19KTsKICAgICAgICAgICAgLy8gICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY29kZSA9PSAyKSB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuJGxvZ291dCgpOwogICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgIC8vICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRRdWVzdGlvbm5haXJlRGF0YUVycm9yJywgZXJyb3IpOwogICAgICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgfQogICAgfSwKfQo="},{"version":3,"sources":["ShareView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShareView.vue","sourceRoot":"src/components/questionnaire","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" v-for=\"(item,index) in questionInfo\" :key=\"index\">\r\n                <el-card shadow=\"hover\" class=\"box_card\" >\r\n                    <h3>{{'标题：'+item.title}}</h3>\r\n                    <div>\r\n                        {{'创建者：'+item.founder}}\r\n                    </div>\r\n                    <div>\r\n                        {{'课 号： '+item.lesson_code}}\r\n                    </div>\r\n                    <div>\r\n                        {{'创建时间： '+item.create_time}}\r\n                    </div>\r\n                    <div>\r\n                        <el-button type=\"text\" class=\"card_btn\" @click=\"preview(item.id)\" style=\"margin-left: 60%\">预览</el-button>\r\n                        <el-button type=\"text\" class=\"card_btn\" @click=\"fastcreate(item.id)\">创建</el-button>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n        <el-dialog\r\n                :visible.sync=\"detailVisible\"\r\n                append-to-body\r\n                center\r\n\r\n        >\r\n            <el-container\r\n                    style=\"height: 500px;width: 100%;\"\r\n            >\r\n                <el-main>\r\n                    <preview\r\n                            :question-list=\"questionList\"\r\n                            :questionnaire=\"questionnaire\"\r\n                    ></preview>\r\n                </el-main>\r\n            </el-container>\r\n\r\n            <div class=\"dialog_btn\">\r\n\r\n                <el-button @click=\"detailVisible=false\">取消</el-button>\r\n            </div>\r\n\r\n        </el-dialog>\r\n    </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n    import preview from \"./preview\";\r\n    export default {\r\n        components:{preview},\r\n        name: \"ShareView\",\r\n        props:{\r\n            questionInfo:Array,\r\n            courseNo:String,\r\n            lessonNo:String\r\n        },\r\n        data: function () {\r\n            return{\r\n                detailVisible:false,\r\n                questionList:[],\r\n                questionnaire:{},\r\n                send_to:0,\r\n                questionnaireType:0\r\n            }\r\n        },\r\n        methods:{\r\n            preview(id){\r\n                this.fetchData(id)\r\n                console.log(this.questionnaire)\r\n                this.detailVisible = true\r\n            },\r\n            fetchData(id) {\r\n\r\n                this.$http.get(\"/questionnaire/\" + id, {}).then((res) => {\r\n\r\n                    if (res.data.code === 0) {\r\n                        this.questionList = []\r\n                        let data = res.data.data\r\n                        const tempList = data.questions\r\n                        if (null == data.lesson_info.lesson_code){\r\n                            this.questionnaire.lessonNo = \"undefined\"\r\n                        }else{\r\n                            this.questionnaire.lessonNo = data.lesson_info.lesson_code\r\n                        }\r\n                        this.questionnaire.questionnaireTitle = data.title\r\n                        this.questionnaireType = data.type\r\n                        this.send_to = data.sendTo\r\n                        for (const t of tempList) {\r\n                            const oneQuestion = {\r\n                                questionIndex: t.index,\r\n                                isBoxSelected: true,\r\n                                questionTitle: t.desc,\r\n                                questionNullable: t.nullable,\r\n                                questionType: t.type,\r\n                                courseGoal: t.target_id,\r\n                                questionOptions: t.items\r\n                            }\r\n                            this.questionList.push(oneQuestion);\r\n                        }\r\n                        this.$message({message: \"问卷已读取\", duration: 1000});\r\n                    } else {\r\n                        this.$message({message: \"code!=0！读取失败！\", duration: 1000})\r\n                    }\r\n                }).catch((err) => {\r\n                    console.log(err)\r\n                    this.questionList = []\r\n                    this.$message({message: \"似乎没有设置选项\", duration: 1000})\r\n                })\r\n\r\n            },\r\n            fastcreate(id){\r\n                this.$http.post('/questionnaire/clone',{\r\n                    id: id,\r\n                    no: this.lessonNo\r\n                })\r\n                .then(res => {\r\n                    if (res.data.code === 0 ){\r\n                        this.$router.push({name: 'questionnaire_edit_page',\r\n                        params:{qid: res.data.data.id}})\r\n                    }\r\n                })\r\n                // this.fetchData(id)\r\n                // this.$http.post('/questionnaire/create', {\r\n                //     'type': this.questionnaireType,\r\n                //     'title': this.questionnaire.questionnaireTitle,\r\n                //     'send_to': this.send_to\r\n                // })\r\n                //     .then(response =>{\r\n                //         let data = response.data;\r\n                //         if (data.code == 0) {\r\n                //             this.$router.push({name: 'questionnaire_edit_page',\r\n                //                 params: {\r\n                //                     qid: data.data.id,\r\n                //                     title:this.questionnaire.questionnaireTitle,\r\n                //                     type:this.questionnaireType,\r\n                //                     questionList:this.questionList,\r\n                //                     courseNo:this.courseNo\r\n                //             }});\r\n                //         } else if (data.code == 2) {\r\n                //             this.$logout();\r\n                //         }\r\n                //     })\r\n                //     .catch(error => {\r\n                //         console.log('getQuestionnaireDataError', error);\r\n                //     });\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .box_card {\r\n        width: 60%;\r\n        margin-top: 10px;\r\n        text-align: left;\r\n        margin-left: 10%;\r\n    }\r\n    .card_btn{\r\n        font-size: 16px;\r\n\r\n    }\r\n    .dialog_btn{\r\n        margin-top: 5%;\r\n        margin-left: 70%;\r\n    }\r\n    #container{\r\n        width: 50%;\r\n        height: 70%;\r\n        border: 1px solid #eee\r\n    }\r\n</style>\r\n"]}]}