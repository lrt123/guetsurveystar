{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\Analysis\\AnalysisCard.vue?vue&type=style&index=0&id=814cb34c&scoped=true&lang=css&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\Analysis\\AnalysisCard.vue","mtime":1592912398077},{"path":"F:\\github\\guetsurveystar\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5iYXItY2hhcnQgewogICAgd2lkdGg6IDEwMCU7Cn0KCi5waWUtY2hhcnQgewogICAgbWFyZ2luLWxlZnQ6IGNhbGMoMjUlIC0gMTAwcHgpOwogICAgd2lkdGg6IDQwMHB4OwogICAgaGVpZ2h0OiAzMDBweDsKfQoKLmJveC1jYXJkIHsKICAgIHRyYW5zaXRpb246IGFsbCBlYXNlIDMwMG1zOwogICAgdGV4dC1hbGlnbjogbGVmdDsKfQoKLmFuYWx5c2lzLXRhYmxlIHsKfQoKLmNob29zZS1zaG93IHsKICAgIG1hcmdpbi1sZWZ0OiA4MHB4Owp9CgouYW5hbHlzaXMtdGl0bGUgewogICAgbWFyZ2luOiAxNXB4OwogICAgZm9udC1zaXplOiAxNHB4Owp9Cg=="},{"version":3,"sources":["AnalysisCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AnalysisCard.vue","sourceRoot":"src/components/Analysis","sourcesContent":["<template>\n    <div>\n        <el-card class=\"box-card\" shadow=\"hover\">\n            <div class=\"analysis-title\">{{questionIndex}}. {{questionTitle}}</div>\n\n            <el-divider></el-divider>\n\n\n            <div v-if=\"questionType===0\">\n\n                <el-radio-group v-model=\"showBar\" class=\"choose-show\">\n                    <el-radio :label=\"true\">数量</el-radio>\n                    <el-radio :label=\"false\">占比</el-radio>\n                </el-radio-group>\n\n                <el-row>\n                    <el-col :xs=\"24\" :sm=\"18\" :md=\"18\" :lg=\"18\" :xl=\"18\">\n                        <div v-show=\"showBar===true\" :id=\"'barChart'+questionIndex\" class=\"bar-chart\"\n                             :style=\"{height:barHeight}\"></div>\n\n                        <div v-show=\"showBar===false\" :id=\"'pieChart'+questionIndex\" class=\"pie-chart\"></div>\n                    </el-col>\n\n                    <el-col :xs=\"24\" :sm=\"6\" :md=\"6\" :lg=\"6\" :xl=\"6\">\n                        <el-table\n                                :data=\"questionValueList\"\n                                :default-sort=\"{prop:'name',order:'ascending'}\"\n                                class=\"analysis-table\">\n                            <el-table-column\n                                    prop=\"name\"\n                                    label=\"选项\">\n                            </el-table-column>\n                            <el-table-column\n                                    prop=\"value\"\n                                    label=\"人数\">\n                            </el-table-column>\n                            <el-table-column\n                                    prop=\"static_value\"\n                                    label=\"总计\">\n                            </el-table-column>\n                        </el-table>\n                    </el-col>\n\n                </el-row>\n\n            </div>\n\n\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import echarts from \"echarts/lib/echarts\"\n    import \"echarts/lib/chart/bar\"\n    import \"echarts/lib/chart/pie\"\n    import \"echarts/lib/component/tooltip\"\n\n    export default {\n        name: \"AnalysisCard\",\n        props: {\n            questionIndex: Number,\n            questionId: Number,\n            questionTitle: String,\n            questionType: Number,\n            questionValueList: Array\n        },\n        mounted() {\n            this.fetchData();\n        },\n        methods: {\n            fetchData() {\n                console.log(12345,this.questionValueList)\n                this.barHeight = this.questionValueList.length*33+150+'px'\n                this.drawBar();\n                this.drawPie();\n                // if (this.questionType === 0 ) {\n                //     this.$http.get(\"/questionnaire/\"+this.route.params.qid+\"/analyze\", {\n                //     }).then((res) => {\n                //         const data = res.data.data;\n                //         const temp = data.items;\n                //         const dataList = [];\n                //         for (const t in temp) {\n                //             dataList.push({'name': t.myoption, 'value': t.count})\n                //         }\n                //         dataList.sort((a, b) => {\n                //             return a.value - b.value\n                //         });\n                //         this.questionValueList = dataList;\n\n                //\n                //     }).catch(() => {\n                //         this.$message({message: \"error！读取失败！\", duration: 1000})\n                //     })\n                //  }\n                // else {\n                //     this.$http.get(\"/api/getWriteValue\", {\n                //         params: {\n                //             questionId: this.questionId\n                //         }\n                //     }).then((res) => {\n                //         this.writeValueList = res['data']\n                //     }).catch(() => {\n                //         this.$message({message: \"error！读取失败！\", duration: 1000})\n                //     })\n                // }\n\n            },\n            drawBar() {\n                const myBarChart = echarts.init(document.getElementById('barChart' + this.questionIndex), 'light');\n                myBarChart.setOption({\n                    tooltip: {},\n                    grid: {left: '15%'},\n                    xAxis: {},\n                    yAxis: {\n                        data: this.questionValueList.map(x => x['name'])\n                    },\n                    series: [{\n                        name: '选择人数',\n                        type: 'bar',\n                        data: this.questionValueList\n                    }]\n                });\n            },\n            drawPie() {\n                const myPieChart = echarts.init(document.getElementById('pieChart' + this.questionIndex), 'light');\n                myPieChart.setOption({\n                    tooltip: {},\n                    grid: {left: 20},\n                    series: [{\n                        name: '选择人数',\n                        type: 'pie',\n                        data: this.questionValueList\n                    }]\n                });\n\n            }\n        },\n\n        data: function () {\n\n            return {\n                showBar: true,\n                writeValueList: null,\n                // questionValueList: [\n                //   {\n                //   name:\"会\",\n                //   value:55\n                //   },\n                //   {\n                //     name:\"不会\",\n                //     value:5\n                //   },\n                //   {\n                //     name:\"会一点\",\n                //     value:33\n                //   },\n                //   {\n                //     name:\"都会\",\n                //     value:100\n                //   }\n                // ],\n                barHeight: '250px'\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .bar-chart {\n        width: 100%;\n    }\n\n    .pie-chart {\n        margin-left: calc(25% - 100px);\n        width: 400px;\n        height: 300px;\n    }\n\n    .box-card {\n        transition: all ease 300ms;\n        text-align: left;\n    }\n\n    .analysis-table {\n    }\n\n    .choose-show {\n        margin-left: 80px;\n    }\n\n    .analysis-title {\n        margin: 15px;\n        font-size: 14px;\n    }\n</style>\n"]}]}