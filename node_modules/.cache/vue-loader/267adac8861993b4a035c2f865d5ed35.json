{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\Analysis\\AnalysisCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\Analysis\\AnalysisCard.vue","mtime":1592912398077},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBlY2hhcnRzIGZyb20gImVjaGFydHMvbGliL2VjaGFydHMiCmltcG9ydCAiZWNoYXJ0cy9saWIvY2hhcnQvYmFyIgppbXBvcnQgImVjaGFydHMvbGliL2NoYXJ0L3BpZSIKaW1wb3J0ICJlY2hhcnRzL2xpYi9jb21wb25lbnQvdG9vbHRpcCIKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJBbmFseXNpc0NhcmQiLAogICAgcHJvcHM6IHsKICAgICAgICBxdWVzdGlvbkluZGV4OiBOdW1iZXIsCiAgICAgICAgcXVlc3Rpb25JZDogTnVtYmVyLAogICAgICAgIHF1ZXN0aW9uVGl0bGU6IFN0cmluZywKICAgICAgICBxdWVzdGlvblR5cGU6IE51bWJlciwKICAgICAgICBxdWVzdGlvblZhbHVlTGlzdDogQXJyYXkKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGZldGNoRGF0YSgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coMTIzNDUsdGhpcy5xdWVzdGlvblZhbHVlTGlzdCkKICAgICAgICAgICAgdGhpcy5iYXJIZWlnaHQgPSB0aGlzLnF1ZXN0aW9uVmFsdWVMaXN0Lmxlbmd0aCozMysxNTArJ3B4JwogICAgICAgICAgICB0aGlzLmRyYXdCYXIoKTsKICAgICAgICAgICAgdGhpcy5kcmF3UGllKCk7CiAgICAgICAgICAgIC8vIGlmICh0aGlzLnF1ZXN0aW9uVHlwZSA9PT0gMCApIHsKICAgICAgICAgICAgLy8gICAgIHRoaXMuJGh0dHAuZ2V0KCIvcXVlc3Rpb25uYWlyZS8iK3RoaXMucm91dGUucGFyYW1zLnFpZCsiL2FuYWx5emUiLCB7CiAgICAgICAgICAgIC8vICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCB0ZW1wID0gZGF0YS5pdGVtczsKICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCBkYXRhTGlzdCA9IFtdOwogICAgICAgICAgICAvLyAgICAgICAgIGZvciAoY29uc3QgdCBpbiB0ZW1wKSB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRhdGFMaXN0LnB1c2goeyduYW1lJzogdC5teW9wdGlvbiwgJ3ZhbHVlJzogdC5jb3VudH0pCiAgICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgICAvLyAgICAgICAgIGRhdGFMaXN0LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuIGEudmFsdWUgLSBiLnZhbHVlCiAgICAgICAgICAgIC8vICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5xdWVzdGlvblZhbHVlTGlzdCA9IGRhdGFMaXN0OwoKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLiRtZXNzYWdlKHttZXNzYWdlOiAiZXJyb3LvvIHor7vlj5blpLHotKXvvIEiLCBkdXJhdGlvbjogMTAwMH0pCiAgICAgICAgICAgIC8vICAgICB9KQogICAgICAgICAgICAvLyAgfQogICAgICAgICAgICAvLyBlbHNlIHsKICAgICAgICAgICAgLy8gICAgIHRoaXMuJGh0dHAuZ2V0KCIvYXBpL2dldFdyaXRlVmFsdWUiLCB7CiAgICAgICAgICAgIC8vICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHF1ZXN0aW9uSWQ6IHRoaXMucXVlc3Rpb25JZAogICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgLy8gICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAvLyAgICAgICAgIHRoaXMud3JpdGVWYWx1ZUxpc3QgPSByZXNbJ2RhdGEnXQogICAgICAgICAgICAvLyAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe21lc3NhZ2U6ICJlcnJvcu+8geivu+WPluWksei0pe+8gSIsIGR1cmF0aW9uOiAxMDAwfSkKICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgIC8vIH0KCiAgICAgICAgfSwKICAgICAgICBkcmF3QmFyKCkgewogICAgICAgICAgICBjb25zdCBteUJhckNoYXJ0ID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJDaGFydCcgKyB0aGlzLnF1ZXN0aW9uSW5kZXgpLCAnbGlnaHQnKTsKICAgICAgICAgICAgbXlCYXJDaGFydC5zZXRPcHRpb24oewogICAgICAgICAgICAgICAgdG9vbHRpcDoge30sCiAgICAgICAgICAgICAgICBncmlkOiB7bGVmdDogJzE1JSd9LAogICAgICAgICAgICAgICAgeEF4aXM6IHt9LAogICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnF1ZXN0aW9uVmFsdWVMaXN0Lm1hcCh4ID0+IHhbJ25hbWUnXSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+mAieaLqeS6uuaVsCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2JhcicsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5xdWVzdGlvblZhbHVlTGlzdAogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBkcmF3UGllKCkgewogICAgICAgICAgICBjb25zdCBteVBpZUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWVDaGFydCcgKyB0aGlzLnF1ZXN0aW9uSW5kZXgpLCAnbGlnaHQnKTsKICAgICAgICAgICAgbXlQaWVDaGFydC5zZXRPcHRpb24oewogICAgICAgICAgICAgICAgdG9vbHRpcDoge30sCiAgICAgICAgICAgICAgICBncmlkOiB7bGVmdDogMjB9LAogICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICfpgInmi6nkurrmlbAnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwaWUnLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMucXVlc3Rpb25WYWx1ZUxpc3QKICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH0pOwoKICAgICAgICB9CiAgICB9LAoKICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2hvd0JhcjogdHJ1ZSwKICAgICAgICAgICAgd3JpdGVWYWx1ZUxpc3Q6IG51bGwsCiAgICAgICAgICAgIC8vIHF1ZXN0aW9uVmFsdWVMaXN0OiBbCiAgICAgICAgICAgIC8vICAgewogICAgICAgICAgICAvLyAgIG5hbWU6IuS8miIsCiAgICAgICAgICAgIC8vICAgdmFsdWU6NTUKICAgICAgICAgICAgLy8gICB9LAogICAgICAgICAgICAvLyAgIHsKICAgICAgICAgICAgLy8gICAgIG5hbWU6IuS4jeS8miIsCiAgICAgICAgICAgIC8vICAgICB2YWx1ZTo1CiAgICAgICAgICAgIC8vICAgfSwKICAgICAgICAgICAgLy8gICB7CiAgICAgICAgICAgIC8vICAgICBuYW1lOiLkvJrkuIDngrkiLAogICAgICAgICAgICAvLyAgICAgdmFsdWU6MzMKICAgICAgICAgICAgLy8gICB9LAogICAgICAgICAgICAvLyAgIHsKICAgICAgICAgICAgLy8gICAgIG5hbWU6IumDveS8miIsCiAgICAgICAgICAgIC8vICAgICB2YWx1ZToxMDAKICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgIC8vIF0sCiAgICAgICAgICAgIGJhckhlaWdodDogJzI1MHB4JwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["AnalysisCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AnalysisCard.vue","sourceRoot":"src/components/Analysis","sourcesContent":["<template>\n    <div>\n        <el-card class=\"box-card\" shadow=\"hover\">\n            <div class=\"analysis-title\">{{questionIndex}}. {{questionTitle}}</div>\n\n            <el-divider></el-divider>\n\n\n            <div v-if=\"questionType===0\">\n\n                <el-radio-group v-model=\"showBar\" class=\"choose-show\">\n                    <el-radio :label=\"true\">数量</el-radio>\n                    <el-radio :label=\"false\">占比</el-radio>\n                </el-radio-group>\n\n                <el-row>\n                    <el-col :xs=\"24\" :sm=\"18\" :md=\"18\" :lg=\"18\" :xl=\"18\">\n                        <div v-show=\"showBar===true\" :id=\"'barChart'+questionIndex\" class=\"bar-chart\"\n                             :style=\"{height:barHeight}\"></div>\n\n                        <div v-show=\"showBar===false\" :id=\"'pieChart'+questionIndex\" class=\"pie-chart\"></div>\n                    </el-col>\n\n                    <el-col :xs=\"24\" :sm=\"6\" :md=\"6\" :lg=\"6\" :xl=\"6\">\n                        <el-table\n                                :data=\"questionValueList\"\n                                :default-sort=\"{prop:'name',order:'ascending'}\"\n                                class=\"analysis-table\">\n                            <el-table-column\n                                    prop=\"name\"\n                                    label=\"选项\">\n                            </el-table-column>\n                            <el-table-column\n                                    prop=\"value\"\n                                    label=\"人数\">\n                            </el-table-column>\n                            <el-table-column\n                                    prop=\"static_value\"\n                                    label=\"总计\">\n                            </el-table-column>\n                        </el-table>\n                    </el-col>\n\n                </el-row>\n\n            </div>\n\n\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import echarts from \"echarts/lib/echarts\"\n    import \"echarts/lib/chart/bar\"\n    import \"echarts/lib/chart/pie\"\n    import \"echarts/lib/component/tooltip\"\n\n    export default {\n        name: \"AnalysisCard\",\n        props: {\n            questionIndex: Number,\n            questionId: Number,\n            questionTitle: String,\n            questionType: Number,\n            questionValueList: Array\n        },\n        mounted() {\n            this.fetchData();\n        },\n        methods: {\n            fetchData() {\n                console.log(12345,this.questionValueList)\n                this.barHeight = this.questionValueList.length*33+150+'px'\n                this.drawBar();\n                this.drawPie();\n                // if (this.questionType === 0 ) {\n                //     this.$http.get(\"/questionnaire/\"+this.route.params.qid+\"/analyze\", {\n                //     }).then((res) => {\n                //         const data = res.data.data;\n                //         const temp = data.items;\n                //         const dataList = [];\n                //         for (const t in temp) {\n                //             dataList.push({'name': t.myoption, 'value': t.count})\n                //         }\n                //         dataList.sort((a, b) => {\n                //             return a.value - b.value\n                //         });\n                //         this.questionValueList = dataList;\n\n                //\n                //     }).catch(() => {\n                //         this.$message({message: \"error！读取失败！\", duration: 1000})\n                //     })\n                //  }\n                // else {\n                //     this.$http.get(\"/api/getWriteValue\", {\n                //         params: {\n                //             questionId: this.questionId\n                //         }\n                //     }).then((res) => {\n                //         this.writeValueList = res['data']\n                //     }).catch(() => {\n                //         this.$message({message: \"error！读取失败！\", duration: 1000})\n                //     })\n                // }\n\n            },\n            drawBar() {\n                const myBarChart = echarts.init(document.getElementById('barChart' + this.questionIndex), 'light');\n                myBarChart.setOption({\n                    tooltip: {},\n                    grid: {left: '15%'},\n                    xAxis: {},\n                    yAxis: {\n                        data: this.questionValueList.map(x => x['name'])\n                    },\n                    series: [{\n                        name: '选择人数',\n                        type: 'bar',\n                        data: this.questionValueList\n                    }]\n                });\n            },\n            drawPie() {\n                const myPieChart = echarts.init(document.getElementById('pieChart' + this.questionIndex), 'light');\n                myPieChart.setOption({\n                    tooltip: {},\n                    grid: {left: 20},\n                    series: [{\n                        name: '选择人数',\n                        type: 'pie',\n                        data: this.questionValueList\n                    }]\n                });\n\n            }\n        },\n\n        data: function () {\n\n            return {\n                showBar: true,\n                writeValueList: null,\n                // questionValueList: [\n                //   {\n                //   name:\"会\",\n                //   value:55\n                //   },\n                //   {\n                //     name:\"不会\",\n                //     value:5\n                //   },\n                //   {\n                //     name:\"会一点\",\n                //     value:33\n                //   },\n                //   {\n                //     name:\"都会\",\n                //     value:100\n                //   }\n                // ],\n                barHeight: '250px'\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .bar-chart {\n        width: 100%;\n    }\n\n    .pie-chart {\n        margin-left: calc(25% - 100px);\n        width: 400px;\n        height: 300px;\n    }\n\n    .box-card {\n        transition: all ease 300ms;\n        text-align: left;\n    }\n\n    .analysis-table {\n    }\n\n    .choose-show {\n        margin-left: 80px;\n    }\n\n    .analysis-title {\n        margin: 15px;\n        font-size: 14px;\n    }\n</style>\n"]}]}