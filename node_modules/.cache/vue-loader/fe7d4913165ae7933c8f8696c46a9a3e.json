{"remainingRequest":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\github\\guetsurveystar\\src\\components\\questionnaire\\ShareView.vue?vue&type=style&index=0&id=38ba67b8&scoped=true&lang=css&","dependencies":[{"path":"F:\\github\\guetsurveystar\\src\\components\\questionnaire\\ShareView.vue","mtime":1593264518982},{"path":"F:\\github\\guetsurveystar\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\github\\guetsurveystar\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYm94X2NhcmQgewogICAgd2lkdGg6IDYwJTsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgbWFyZ2luLWxlZnQ6IDEwJTsKfQouY2FyZF9idG57CiAgICBmb250LXNpemU6IDE2cHg7Cgp9Ci5kaWFsb2dfYnRuewogICAgbWFyZ2luLXRvcDogNSU7CiAgICBtYXJnaW4tbGVmdDogNzAlOwp9CiNjb250YWluZXJ7CiAgICB3aWR0aDogNTAlOwogICAgaGVpZ2h0OiA3MCU7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlCn0K"},{"version":3,"sources":["ShareView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShareView.vue","sourceRoot":"src/components/questionnaire","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\" v-for=\"(item,index) in questionInfo\" :key=\"index\">\r\n                <el-card shadow=\"hover\" class=\"box_card\" >\r\n                    <h3>{{'标题：'+item.title}}</h3>\r\n                    <div>\r\n                        {{'创建者：'+item.founder}}\r\n                    </div>\r\n                    <div>\r\n                        {{'课 号： '+item.lesson_code}}\r\n                    </div>\r\n                    <div>\r\n                        {{'创建时间： '+item.create_time}}\r\n                    </div>\r\n                    <div>\r\n                        <el-button type=\"text\" class=\"card_btn\" @click=\"preview(item.id)\" style=\"margin-left: 60%\">预览</el-button>\r\n                        <el-button type=\"text\" class=\"card_btn\" @click=\"fastcreate(item.id)\">创建</el-button>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n        <el-dialog\r\n                :visible.sync=\"detailVisible\"\r\n                append-to-body\r\n                center\r\n\r\n        >\r\n            <el-container\r\n                    style=\"height: 500px;width: 100%;\"\r\n            >\r\n                <el-main>\r\n                    <preview\r\n                            :question-list=\"questionList\"\r\n                            :questionnaire=\"questionnaire\"\r\n                    ></preview>\r\n                </el-main>\r\n            </el-container>\r\n\r\n            <div class=\"dialog_btn\">\r\n\r\n                <el-button @click=\"detailVisible=false\">取消</el-button>\r\n            </div>\r\n\r\n        </el-dialog>\r\n    </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n    import preview from \"./preview\";\r\n    export default {\r\n        components:{preview},\r\n        name: \"ShareView\",\r\n        props:{\r\n            questionInfo:Array,\r\n            courseNo:String,\r\n            lessonNo:String\r\n        },\r\n        data: function () {\r\n            return{\r\n                detailVisible:false,\r\n                questionList:[],\r\n                questionnaire:{},\r\n                send_to:0,\r\n                questionnaireType:0\r\n            }\r\n        },\r\n        methods:{\r\n            preview(id){\r\n                this.fetchData(id)\r\n                console.log(this.questionnaire)\r\n                this.detailVisible = true\r\n            },\r\n            fetchData(id) {\r\n\r\n                this.$http.get(\"/questionnaire/\" + id, {}).then((res) => {\r\n\r\n                    if (res.data.code === 0) {\r\n                        this.questionList = []\r\n                        let data = res.data.data\r\n                        const tempList = data.questions\r\n                        if (null == data.lesson_info.lesson_code){\r\n                            this.questionnaire.lessonNo = \"undefined\"\r\n                        }else{\r\n                            this.questionnaire.lessonNo = data.lesson_info.lesson_code\r\n                        }\r\n                        this.questionnaire.questionnaireTitle = data.title\r\n                        this.questionnaireType = data.type\r\n                        this.send_to = data.sendTo\r\n                        for (const t of tempList) {\r\n                            const oneQuestion = {\r\n                                questionIndex: t.index,\r\n                                isBoxSelected: true,\r\n                                questionTitle: t.desc,\r\n                                questionNullable: t.nullable,\r\n                                questionType: t.type,\r\n                                courseGoal: t.target_id,\r\n                                questionOptions: t.items\r\n                            }\r\n                            this.questionList.push(oneQuestion);\r\n                        }\r\n                        this.$message({message: \"问卷已读取\", duration: 1000});\r\n                    } else {\r\n                        this.$message({message: \"code!=0！读取失败！\", duration: 1000})\r\n                    }\r\n                }).catch((err) => {\r\n                    console.log(err)\r\n                    this.questionList = []\r\n                    this.$message({message: \"似乎没有设置选项\", duration: 1000})\r\n                })\r\n\r\n            },\r\n            fastcreate(id){\r\n                this.$http.post('/questionnaire/clone',{\r\n                    id: id,\r\n                    no: this.lessonNo\r\n                })\r\n                .then(res => {\r\n                    if (res.data.code === 0 ){\r\n                        this.$router.push({name: 'questionnaire_edit_page',\r\n                        params:{qid: res.data.data.id}})\r\n                    }\r\n                })\r\n                // this.fetchData(id)\r\n                // this.$http.post('/questionnaire/create', {\r\n                //     'type': this.questionnaireType,\r\n                //     'title': this.questionnaire.questionnaireTitle,\r\n                //     'send_to': this.send_to\r\n                // })\r\n                //     .then(response =>{\r\n                //         let data = response.data;\r\n                //         if (data.code == 0) {\r\n                //             this.$router.push({name: 'questionnaire_edit_page',\r\n                //                 params: {\r\n                //                     qid: data.data.id,\r\n                //                     title:this.questionnaire.questionnaireTitle,\r\n                //                     type:this.questionnaireType,\r\n                //                     questionList:this.questionList,\r\n                //                     courseNo:this.courseNo\r\n                //             }});\r\n                //         } else if (data.code == 2) {\r\n                //             this.$logout();\r\n                //         }\r\n                //     })\r\n                //     .catch(error => {\r\n                //         console.log('getQuestionnaireDataError', error);\r\n                //     });\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .box_card {\r\n        width: 60%;\r\n        margin-top: 10px;\r\n        text-align: left;\r\n        margin-left: 10%;\r\n    }\r\n    .card_btn{\r\n        font-size: 16px;\r\n\r\n    }\r\n    .dialog_btn{\r\n        margin-top: 5%;\r\n        margin-left: 70%;\r\n    }\r\n    #container{\r\n        width: 50%;\r\n        height: 70%;\r\n        border: 1px solid #eee\r\n    }\r\n</style>\r\n"]}]}