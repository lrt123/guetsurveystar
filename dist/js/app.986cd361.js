(function(e){function t(t){for(var a,o,l=t[0],r=t[1],u=t[2],c=0,p=[];c<l.length;c++)o=l[c],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,o=1;o<i.length;o++){var r=i[o];0!==n[r]&&(a=!1)}a&&(s.splice(t--,1),e=l(l.s=i[0]))}return e}var a={},n={app:0},s=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-b2a34d90":"2528ada1"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,a){i=n[e]=[t,a]}));t.push(i[2]=a);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=o(e);var u=new Error;s=function(t){r.onerror=r.onload=null,clearTimeout(c);var i=n[e];if(0!==i){if(i){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",u.name="ChunkLoadError",u.type=a,u.request=s,i[1](u)}n[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(i,a,function(t){return e[t]}.bind(null,a));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=u;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var a=i("85ec"),n=i.n(a);n.a},"0372":function(e,t,i){"use strict";var a=i("0e7f"),n=i.n(a);n.a},"03aa":function(e,t,i){},"0e7f":function(e,t,i){},"178a":function(e,t,i){"use strict";var a=i("5640"),n=i.n(a);n.a},"1bfb":function(e,t,i){},"21b7":function(e,t,i){},"2f01":function(e,t,i){},3092:function(e,t,i){},"310f":function(e,t,i){},"3f22":function(e,t,i){"use strict";var a=i("ee5a"),n=i.n(a);n.a},"4bf4":function(e,t,i){},"4bf7":function(e,t,i){"use strict";var a=i("8a1b"),n=i.n(a);n.a},"4ceb":function(e,t,i){"use strict";var a=i("21b7"),n=i.n(a);n.a},"52ef":function(e,t,i){"use strict";var a=i("310f"),n=i.n(a);n.a},5640:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},s=[],o={name:"app",created:function(){console.log(this.$cookies.get("token")),this.$setAuth(this.$cookies.get("token"))}},l=o,r=(i("034f"),i("2877")),u=Object(r["a"])(l,n,s,!1,null,null,null),c=u.exports,d=(i("9e1f"),i("450d"),i("6ed5")),p=i.n(d),m=(i("0fb7"),i("f529")),f=i.n(m),h=(i("b84d"),i("c216")),v=i.n(h),b=(i("8f24"),i("76b9")),g=i.n(b),y=(i("e3ea"),i("7bc3")),_=i.n(y),q=(i("bd49"),i("18ff")),w=i.n(q),x=(i("960d"),i("defb")),k=i.n(x),C=(i("cb70"),i("b370")),$=i.n(C),S=(i("560b"),i("dcdc")),T=i.n(S),V=(i("2f02"),i("fe11")),N=i.n(V),I=(i("ed7b"),i("e1a5")),L=i.n(I),O=(i("9c49"),i("6640")),B=i.n(O),D=(i("d2ac"),i("95b0")),E=i.n(D),A=(i("cbb5"),i("8bbc")),j=i.n(A),Q=(i("5466"),i("ecdf")),P=i.n(Q),F=(i("38a0"),i("ad41")),z=i.n(F),M=(i("920a"),i("4f0c")),G=i.n(M),U=(i("0c67"),i("299c")),W=i.n(U),R=(i("4fdb"),i("b076")),H=i.n(R),J=(i("a769"),i("5cc3")),Z=i.n(J),K=(i("34db"),i("3803")),X=i.n(K),Y=(i("8bd8"),i("4cb2")),ee=i.n(Y),te=(i("ce18"),i("f58e")),ie=i.n(te),ae=(i("4ca3"),i("443e")),ne=i.n(ae),se=(i("be4f"),i("896a")),oe=i.n(se),le=(i("fd71"),i("a447")),re=i.n(le),ue=(i("7a0f"),i("0f6c")),ce=i.n(ue),de=(i("f4f9"),i("c2cc")),pe=i.n(de),me=(i("6611"),i("e772")),fe=i.n(me),he=(i("1f1a"),i("4e4b")),ve=i.n(he),be=(i("b5d8"),i("f494")),ge=i.n(be),ye=(i("fe07"),i("6ac5")),_e=i.n(ye),qe=(i("bdc7"),i("aa2f")),we=i.n(qe),xe=(i("de31"),i("c69e")),ke=i.n(xe),Ce=(i("a673"),i("7b31")),$e=i.n(Ce),Se=(i("10cb"),i("f3ad")),Te=i.n(Se),Ve=(i("eca7"),i("3787")),Ne=i.n(Ve),Ie=(i("425f"),i("4105")),Le=i.n(Ie),Oe=(i("e612"),i("dd87")),Be=i.n(Oe),De=(i("075a"),i("72aa")),Ee=i.n(De),Ae=(i("b8e0"),i("a4c4")),je=i.n(Ae),Qe=(i("1951"),i("eedf")),Pe=i.n(Qe),Fe=(i("adec"),i("3d2d")),ze=i.n(Fe),Me=(i("826b"),i("c263")),Ge=i.n(Me),Ue=(i("a7cc"),i("df33")),We=i.n(Ue),Re=(i("915d"),i("e04d")),He=i.n(Re);i("e05f");a["default"].use(He.a),a["default"].use(We.a),a["default"].use(Ge.a),a["default"].use(ze.a),a["default"].use(Pe.a),a["default"].use(je.a),a["default"].use(Ee.a),a["default"].use(Be.a),a["default"].use(Le.a),a["default"].use(Ne.a),a["default"].use(Te.a),a["default"].use($e.a),a["default"].use(ke.a),a["default"].use(we.a),a["default"].use(_e.a),a["default"].use(ge.a),a["default"].use(ve.a),a["default"].use(fe.a),a["default"].use(pe.a),a["default"].use(ce.a),a["default"].use(re.a),a["default"].use(oe.a),a["default"].use(ne.a),a["default"].use(ie.a),a["default"].use(ee.a),a["default"].use(X.a),a["default"].use(Z.a),a["default"].use(H.a),a["default"].use(W.a),a["default"].use(G.a),a["default"].use(z.a),a["default"].use(P.a),a["default"].use(j.a),a["default"].use(E.a),a["default"].use(B.a),a["default"].use(L.a),a["default"].use(N.a),a["default"].use(T.a),a["default"].use($.a),a["default"].use(k.a),a["default"].use(w.a),a["default"].use(_.a),a["default"].use(g.a),a["default"].use(v.a),a["default"].component(f.a),a["default"].component(p.a),a["default"].prototype.$message=f.a,a["default"].prototype.$msgbox=p.a;var Je=i("bc3a"),Ze=i.n(Je);a["default"].prototype.$http=Ze.a,a["default"].prototype.$http.defaults.withCredentials=!0,a["default"].prototype.$http.defaults.baseURL="http://47.100.137.175:20000",i("09bd").shim();var Ke=i("2b27"),Xe=i.n(Ke);a["default"].use(Xe.a),a["default"].prototype.$cookies=Xe.a,a["default"].prototype.$cookies.config("30d","http://192.168.1.176:20000"),a["default"].prototype.$setAuth=function(e){this.$http.defaults.headers.common["Authorization"]=e},a["default"].prototype.$logout=function(){window.localStorage.clear(),this.$cookies.remove("token"),this.$http.get("/user/logout"),this.$router.push({path:"/login"})};i("c975");var Ye=i("8c4f"),et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"header"},[i("div",{staticClass:"inner-header flex"},[i("div",[i("el-link",{staticClass:"login-title",staticStyle:{"font-size":"48px",color:"#FFFFFF",margin:"2px"},attrs:{icon:"el-icon-s-data",underline:!1}},[e._v("校园调研星")]),i("p",[e._v("一款快速分发校园问卷的产品")]),i("el-button",{staticClass:"face-btn",attrs:{type:"primary",round:""},on:{click:e.goToUse}},[e._v("开始使用")])],1)]),i("div",[i("svg",{staticClass:"waves",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none","shape-rendering":"auto"}},[i("defs",[i("path",{attrs:{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"}})]),i("g",{staticClass:"parallax"},[i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"0",fill:"rgba(255,255,255,0.7"}}),i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"3",fill:"rgba(255,255,255,0.5)"}}),i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"5",fill:"rgba(255,255,255,0.3)"}}),i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"7",fill:"#fff"}})])])])])])},tt=[],it={methods:{goToUse:function(){var e=this.$cookies.get("token");e?this.$router.push({path:"/manage"}):this.$router.push({path:"/login"})}}},at=it,nt=(i("3f22"),Object(r["a"])(at,et,tt,!1,null,"1706c272",null)),st=nt.exports,ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-bg"},[i("el-container",{attrs:{direction:"vertical"}},[i("el-main",{staticClass:"login-center"},[i("el-link",{staticClass:"login-title",staticStyle:{"font-size":"24px",color:"#409EFF"},attrs:{icon:"el-icon-s-data",underline:!1,type:"primary"},on:{click:e.goToFace}},[e._v("校园调研星")]),i("el-tabs",{attrs:{stretch:""}},[i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-coordinate"}),e._v(" 登录账号")]),i("login-page")],1),i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-edit"}),e._v(" 校企注册")]),i("register-page")],1)],1)],1)],1)],1)},lt=[],rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{ref:"mform",attrs:{model:e.mform,rules:e.rules}},[i("el-form-item",{staticClass:"login-margin-top",attrs:{prop:"username"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入账号",clearable:""},model:{value:e.mform.username,callback:function(t){e.$set(e.mform,"username",t)},expression:"mform.username"}})],1),i("el-form-item",{attrs:{prop:"passwd"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入密码","show-password":""},model:{value:e.mform.passwd,callback:function(t){e.$set(e.mform,"passwd",t)},expression:"mform.passwd"}})],1),i("el-form-item",{staticClass:"login-full-width"},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.mform.type,callback:function(t){e.$set(e.mform,"type",t)},expression:"mform.type"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",[i("el-button",{staticClass:"login-btn",attrs:{disabled:e.btn.status,icon:e.btn.icon,type:"primary",round:""},on:{click:e.login}},[e._v(" "+e._s(e.btn.text)+" ")])],1)],1)},ut=[],ct=(i("d3b7"),{data:function(){return{btn:{icon:"",status:!1,text:"登 录"},mform:{username:"",passwd:"",type:2},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"}],passwd:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},options:[{value:2,label:"类型: 学生登录"},{value:1,label:"类型: 教师登录"},{value:5,label:"类型: 校企人员登录"}]}},methods:{setLoadinBtnStatus:function(e){this.btn.status=e,this.btn.icon=e?"el-icon-loading":"",this.btn.text=e?"登录中...":"登 录"},login:function(){var e=this;this.setLoadinBtnStatus(!1),this.$refs.mform.validate((function(t){if(t){var i,a;e.setLoadinBtnStatus(!0);var n={account:e.mform.username,password:e.mform.passwd,role:e.mform.type};e.$http.post("/user/login",n).then((function(t){var n=t.data;console.log(n),0==n.code?(i="登录成功！",a="success",e.$cookies.set("token",n.data.token),window.localStorage.setItem("token",n.data.token),window.localStorage.setItem("type",e.mform.type),e.$setAuth(n.data.token),e.$router.push({path:"/manage"})):(i="登录失败！账号或密码错误",a="warning")})).catch((function(e){console.log(e),i="请求错误！",a="error"})).finally((function(){e.setLoadinBtnStatus(!1),e.$message({type:a,message:i,center:!0,duration:2500})}))}}))}}}),dt=ct,pt=Object(r["a"])(dt,rt,ut,!1,null,null,null),mt=pt.exports,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{ref:"mform",attrs:{model:e.mform,rules:e.rules}},[i("el-form-item",{staticClass:"login-margin-top",attrs:{prop:"username"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"* 请输入注册账号(长度为6到16个字符)",minlength:"8",maxlength:"16",clearable:""},model:{value:e.mform.username,callback:function(t){e.$set(e.mform,"username","string"===typeof t?t.trim():t)},expression:"mform.username"}})],1),i("el-form-item",{attrs:{prop:"passwd"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"* 请输入密码(长度为8到16个字符)",minlength:"8",maxlength:"16","show-password":""},model:{value:e.mform.passwd,callback:function(t){e.$set(e.mform,"passwd","string"===typeof t?t.trim():t)},expression:"mform.passwd"}})],1),i("el-form-item",{attrs:{prop:"passwd2"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"* 请再输一遍密码",minlength:"8",maxlength:"16","show-password":""},model:{value:e.mform.passwd2,callback:function(t){e.$set(e.mform,"passwd2","string"===typeof t?t.trim():t)},expression:"mform.passwd2"}})],1),i("el-form-item",{attrs:{prop:"name"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-document",placeholder:"* 请输入名字",clearable:""},model:{value:e.mform.name,callback:function(t){e.$set(e.mform,"name","string"===typeof t?t.trim():t)},expression:"mform.name"}})],1),i("el-form-item",{attrs:{prop:"phoneNumber"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-phone-outline",placeholder:"* 请输入手机号",minlength:"11",maxlength:"11",clearable:""},model:{value:e.mform.phoneNumber,callback:function(t){e.$set(e.mform,"phoneNumber","string"===typeof t?t.trim():t)},expression:"mform.phoneNumber"}})],1),i("el-form-item",{attrs:{prop:"company"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-office-building",placeholder:"* 请输入公司名字",clearable:""},model:{value:e.mform.company,callback:function(t){e.$set(e.mform,"company","string"===typeof t?t.trim():t)},expression:"mform.company"}})],1),i("el-form-item",[i("el-button",{staticClass:"login-btn",attrs:{disabled:e.btn.status,icon:e.btn.icon,type:"primary",round:""},on:{click:e.register}},[e._v(" "+e._s(e.btn.text)+" ")])],1)],1)},ht=[],vt=(i("b0c0"),{data:function(){return{btn:{icon:"",status:!1,text:"注 册"},mform:{username:"",passwd:"",passwd2:"",name:"",phoneNumber:"",company:""},rules:{username:[{required:!0,message:"请输入注册账号",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],passwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],passwd2:[{required:!0,message:"请再输一遍密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"},{validator:this.validatePasswdAgain,trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:this.validatePhoneNumber,trigger:"blur"}],company:[{required:!0,message:"请输入公司名称",trigger:"blur"}]}}},methods:{validatePasswdAgain:function(e,t,i){""!=this.mform.passwd&&""!=this.mform.passwd2&&this.mform.passwd!=this.mform.passwd2?i(new Error("两次输入密码不一致")):i()},validateEmailFormat:function(e,t,i){var a=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;a.test(t)?i():i(new Error("邮箱格式错误"))},validatePhoneNumber:function(e,t,i){var a=/^1[356789]\d{9}/;a.test(t)?i():i(new Error("手机号格式错误"))},setLoadinBtnStatus:function(e){this.btn.status=e,this.btn.icon=e?"el-icon-loading":"",this.btn.text=e?"注册中...":"注 册"},register:function(){var e=this;this.$refs.mform.validate((function(t){if(t){var i,a;e.setLoadinBtnStatus(!0);var n={account:e.mform.username,name:e.mform.name,password:e.mform.passwd,phone:e.mform.phoneNumber,cn:e.mform.company};e.$http.post("/user/register",n).then((function(e){var t=e.data;i=t.msg,0==t.code?(a="success",setTimeout((function(){location.reload()}),500)):a="warning"})).catch((function(e){i="请求错误！",a="error"})).finally((function(){e.setLoadinBtnStatus(!1),e.$message({type:a,message:i,center:!0,duration:2500})}))}}))}}}),bt=vt,gt=Object(r["a"])(bt,ft,ht,!1,null,null,null),yt=gt.exports,_t={components:{"login-page":mt,"register-page":yt},methods:{goToFace:function(){this.$router.push({path:"/"})}}},qt=_t,wt=(i("d6db"),Object(r["a"])(qt,ot,lt,!1,null,null,null)),xt=wt.exports,kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-style"},[i("el-container",[i("el-header",{staticClass:"header-style",style:e.paddingStyle},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"icon-title"},[i("el-link",{staticStyle:{"font-size":"20px",color:"#409EFF"},attrs:{icon:"el-icon-s-data",underline:!1,type:"primary"}},[e._v("校园调研星")])],1),i("el-menu",{staticClass:"header-right-menu",attrs:{mode:"horizontal",router:""}},[e._l(e.headerMenu,(function(t){return i("el-tooltip",{key:t.id,staticClass:"item",attrs:{effect:"dark",placement:"bottom-start",content:t.value}},[i("el-menu-item",{attrs:{index:t.path},on:{click:function(i){return e.onHeaderMenuItemClick(t.value)}}},[i("i",{class:t.icon})])],1)})),i("el-submenu",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],attrs:{index:"4"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-menu"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("菜单")])]),e._l(e.menu,(function(t){return i("el-menu-item",{key:t.id,attrs:{index:t.path}},[i("i",{class:t.icon}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.value)+" ")])])}))],2)],2)],1),i("el-container",{style:e.marginStyle},[i("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"aside-style"},[i("el-menu",{attrs:{"default-active":e.defaultActiveItemName,router:""}},e._l(e.menu,(function(t){return i("el-menu-item",{key:t.id,attrs:{index:t.path}},[i("i",{class:t.icon}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.value)+" ")])])})),1)],1),i("el-main",{staticStyle:{"margin-top":"1%"}},[i("router-view",{on:{setActiveMenuItem:function(t){return e.setMenuDefaultActive(t)}}})],1)],1)],1)],1)},Ct=[],$t={data:function(){return{paddingStyle:{"padding-left":"12%","padding-right":"12%"},marginStyle:{"margin-left":"12%","margin-right":"12%"},isShow:!0,defaultActiveItemName:"/manage/user",headerMenu:[{id:"header-menu-feedback",value:"反馈",icon:"el-icon-s-comment",path:"/manage/feedback"},{id:"header-menu-help",value:"帮助",icon:"el-icon-question",path:"/manage/help"},{id:"header-menu-logout",value:"退出登录",icon:"el-icon-s-promotion",path:"/logout"}],smenu:[{id:"aside-menu-person",value:"个人中心",icon:"el-icon-user",path:"/manage/user"},{id:"aside-menu-questionnaire",value:"我的问卷",icon:"el-icon-tickets",path:"/manage/questionnaire"},{id:"aside-menu-course",value:"我的课程",icon:"el-icon-reading",path:"/manage/course"},{id:"aside-menu-setting",value:"设置中心",icon:"el-icon-setting",path:"/manage/setting"}],tmenu:[{id:"aside-menu-person",value:"个人中心",icon:"el-icon-user",path:"/manage/user"},{id:"aside-menu-questionnaire",value:"我的问卷",icon:"el-icon-tickets",path:"/manage/questionnaire"},{id:"aside-menu-statistics",value:"统计结果",icon:"el-icon-pie-chart",path:"/manage/statistics"},{id:"aside-menu-course",value:"我的课程",icon:"el-icon-reading",path:"/manage/course"},{id:"aside-menu-setting",value:"设置中心",icon:"el-icon-setting",path:"/manage/setting"}],omenu:[{id:"aside-menu-person",value:"个人中心",icon:"el-icon-user",path:"/manage/user"},{id:"aside-menu-questionnaire",value:"我的问卷",icon:"el-icon-tickets",path:"/manage/questionnaire"},{id:"aside-menu-statistics",value:"统计结果",icon:"el-icon-pie-chart",path:"/manage/statistics"},{id:"aside-menu-setting",value:"设置中心",icon:"el-icon-setting",path:"/manage/setting"}],menu:[]}},mounted:function(){var e=this;this.onClientWidthChanged(document.body.clientWidth),window.addEventListener("resize",(function(){e.onClientWidthChanged(document.body.clientWidth)}));var t=window.localStorage.getItem("type");1==t?this.menu=this.tmenu:2==t?this.menu=this.smenu:5==t&&(this.menu=this.omenu)},methods:{onClientWidthChanged:function(e){if(e>=992){this.isShow=!0;var t=parseInt(e/1920*12)+"%";this.paddingStyle["padding-left"]=t,this.paddingStyle["padding-right"]=t,this.marginStyle["margin-left"]=t,this.marginStyle["margin-right"]=t}else this.isShow=!1,this.paddingStyle["padding-left"]=0,this.paddingStyle["padding-right"]=0,this.marginStyle["margin-left"]=0,this.marginStyle["margin-right"]=0},setMenuDefaultActive:function(e){this.defaultActiveItemName=e},loginOut:function(){var e=this;this.$msgbox.confirm("即将退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t,i){"confirm"==t&&(window.localStorage.clear(),e.$cookies.remove("token"),e.$http.get("/user/logout"),e.$router.push({path:"/login"}),e.$logout())}})},onHeaderMenuItemClick:function(e){"退出登录"==e&&this.loginOut()}}},St=$t,Tt=(i("52ef"),Object(r["a"])(St,kt,Ct,!1,null,"6c8ded5e",null)),Vt=Tt.exports,Nt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-style"},[i("el-container",[i("el-header",{staticClass:"header-style"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"header-left"},[i("el-link",{staticClass:"login-title",staticStyle:{"font-size":"22px",color:"#409EFF","margin-right":"8px"},attrs:{underline:!1,icon:"el-icon-back"},on:{click:e.back}}),i("el-link",{staticClass:"login-title",staticStyle:{"font-size":"22px",color:"#409EFF"},attrs:{icon:"el-icon-s-home",type:"primary",underline:!1},on:{click:e.homepage}})],1),i("div",{staticClass:"header-center"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadData,(function(t){return i("el-breadcrumb-item",{key:t.id},[i("span",{class:t.id===e.activeBreadItemId?"bread-title-bold":""},[e._v(" "+e._s(t.value)+" ")])])})),1)],1)]),i("el-container",[i("el-main",{staticStyle:{"margin-top":"1%"}},[i("router-view",{on:{setActiveBreadItem:function(t){return e.setActiveBreadItem(t)}}})],1)],1)],1)],1)},It=[],Lt={data:function(){return{isShow:!0,activeBreadItemId:"",breadData:[{id:"bread_create_page",value:"创建",cls:""},{id:"bread_edit_page",value:"编辑",cls:""},{id:"bread_post_page",value:"发布",cls:""},{id:"bread_fillin_page",value:"填写",cls:""}]}},mounted:function(){},methods:{setActiveBreadItem:function(e){this.activeBreadItemId=e},back:function(){this.$router.back()},homepage:function(){this.$router.push("/manage")}}},Ot=Lt,Bt=(i("e89a"),Object(r["a"])(Ot,Nt,It,!1,null,"6e41ab1e",null)),Dt=Bt.exports,Et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"grid-row"},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.tipVisiabled,expression:"tipVisiabled"}],staticClass:"grid-col",attrs:{span:24}},[i("el-tag",{attrs:{size:"medium",type:"success",closable:""},on:{close:e.closeTip}},[e._v(" "+e._s(e.tip)+" ")])],1),i("el-col",{attrs:{span:24}},[i("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"#"}}),i("el-table-column",{attrs:{prop:"key",align:"center",label:"资料名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{size:"medium",type:"primary"}},[e._v(e._s(t.row.key))])]}}])}),i("el-table-column",{attrs:{prop:"value",align:"center",label:"资料内容"}}),i("el-table-column",{attrs:{align:"center",label:"操作"}},[[i("el-button",{attrs:{size:"mini",round:""}},[e._v("编辑")])]],2)],1)],1)],1),i("el-row",{staticClass:"grid-row"},e._l(e.cardData,(function(t){return i("el-col",{key:t.id,staticClass:"grid-col-card",attrs:{span:8}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-button",{staticStyle:{"font-size":"32px"},attrs:{icon:t.icon,type:t.type,circle:""}}),i("p",[e._v(" "+e._s(t.value)+" ")]),i("p",[e._v("数量："+e._s(t.number))])],1)],1)})),1)],1)},At=[],jt=i("b85c"),Qt={data:function(){return{tip:"欢迎回来！",tipVisiabled:!0,timer:null,cardData:[{id:"user-prepare",value:"待发布",type:"warning",icon:"el-icon-s-opportunity",number:0},{id:"user-doing",value:"未完成",type:"danger",icon:"el-icon-s-release",number:0},{id:"user-done",value:"已完成",type:"success",icon:"el-icon-s-claim",number:0}],tableData:[{key:"名字",value:"未命名"},{key:"账号",value:"NULL"},{key:"密码",value:"********"},{key:"用户类型",value:"NULL"},{key:"手机号",value:"NULL"},{key:"所属单位",value:"NULL"},{key:"地址",value:"NULL"}]}},mounted:function(){this.$emit("setActiveMenuItem","/manage/user"),this.timer=self.setInterval(this.setTime,1e3),this.getUserData()},methods:{setTime:function(){var e="",t=new Date,i=t.getHours(),a=t.getMinutes(),n=t.getSeconds();i>=0&&i<6?e="欢迎回来！现在是凌晨，再休息会儿吧！":i>=6&&i<11?e="早上好！欢迎回来！":i>=11&&i<13?e="中午时间，欢迎回来！":i>=13&&i<18?e="下午好！欢迎回来！":i>=18&&i<24&&(e="欢迎回来！入夜了，早点休息吧"),this.tip="时间："+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+"，"+e},closeTip:function(){this.tipVisiabled=!1,clearInterval(this.timer)},getUserData:function(){var e=this;this.$http.get("/user/info").then((function(t){var i=t.data;if(0==i.code){e.tableData=i.data.info;var a,n=i.data.questionnaire_status,s=Object(jt["a"])(e.cardData);try{for(s.s();!(a=s.n()).done;){var o=a.value;"user-prepare"===o.id?o.number=n.wait:"user-doing"===o.id?o.number=n.unfinished:"user-done"===o.id&&(o.number=n.finished)}}catch(l){s.e(l)}finally{s.f()}}else 2==i.code&&e.$logout()})).catch((function(e){console.log("getUserDataError",e)}))}}},Pt=Qt,Ft=(i("5c03"),Object(r["a"])(Pt,Et,At,!1,null,"2b8d3668",null)),zt=Ft.exports,Mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"grid-row"},[i("el-col",{staticClass:"grid-col",attrs:{span:24}},[i("el-steps",{attrs:{simple:""}},[i("el-step",{attrs:{title:"创建",icon:"el-icon-plus"}}),i("el-step",{attrs:{title:"发放",icon:"el-icon-position"}}),i("el-step",{attrs:{title:"填写",icon:"el-icon-edit"}})],1)],1)],1),i("el-row",{staticClass:"grid-row",attrs:{span:24}},[i("el-timeline",[e.funcBthShow?i("el-timeline-item",{staticClass:"hidden-sm-and-down",attrs:{placement:"top"}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-checkbox",{staticClass:"quest-checkbox",on:{change:e.onFuncCheckboxChanged},model:{value:e.funcChecked,callback:function(t){e.funcChecked=t},expression:"funcChecked"}}),e._l(e.funcBtnData,(function(t){return i("el-button",{key:t.id,attrs:{type:t.type,icon:t.icon,round:""},on:{click:function(i){return e.onClickFuncBtn(t.value)}}},[e._v(" "+e._s(t.value)+" ")])}))],2)],1):e._e(),e.funcBthShow?i("el-timeline-item",{staticClass:"hidden-sm-and-up",attrs:{placement:"top"}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-checkbox",{staticClass:"quest-checkbox",on:{change:e.onFuncCheckboxChanged},model:{value:e.funcChecked,callback:function(t){e.funcChecked=t},expression:"funcChecked"}}),e._l(e.funcBtnData,(function(t){return i("el-button",{key:t.id,attrs:{type:t.type,icon:t.icon,circle:""},on:{click:function(i){return e.onClickFuncBtn(t.value)}}})}))],2)],1):e._e(),e._l(e.questionnarieData,(function(t,a){return i("el-timeline-item",{key:t.id,attrs:{timestamp:t.time,placement:"top"}},[i("div",{on:{click:function(i){return e.onClickQuestionnaireCard(t)}}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-checkbox",{staticStyle:{float:"left"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}},[e._v("[ID]："+e._s(t.id)+" - [状态]："+e._s(t.status))]),e.funcBthShow?i("el-dropdown",{staticStyle:{float:"right"},on:{command:e.onClickFuncMenu}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-s-unfold el-icon--right",staticStyle:{"font-size":"18px"}})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropDownData,(function(n){return i("el-dropdown-item",{key:n.id,attrs:{type:n.type,icon:n.icon,command:{target:t,value:n.value,index:a}}},[e._v(" "+e._s(n.value)+" ")])})),1)],1):e._e(),i("h3",{staticStyle:{clear:"both","margin-top":"32px"}},[e._v(" "+e._s(t.title)+" ")]),i("el-table",{attrs:{data:t.ex,"show-header":!1}},[i("el-table-column",{attrs:{prop:"key",align:"center",label:"key",width:"100"}}),i("el-table-column",{attrs:{prop:"value",label:"value"}})],1),e.student?i("div",[t.is_need_fill?i("el-button",{staticClass:"form-btn",attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(i){return e.go_fill(t.id,0)}}},[e._v("填写问卷")]):e._e(),!1===t.is_need_fill?i("el-button",{staticClass:"form-btn",attrs:{type:"success",icon:"el-icon-tickets"},on:{click:function(i){return e.go_fill(t.id,1)}}},[e._v("查看详情")]):e._e()],1):e._e(),e.teacher?i("div",[t.editable?i("el-button",{staticClass:"form-btn",attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(i){return e.go_edit(t.id,t.title,t.ex[1].value,t.type)}}},[e._v("编辑问卷")]):e._e()],1):e._e()],1)],1)])}))],2)],1),i("el-dialog",{attrs:{visible:e.fastVisible,"append-to-body":"",center:"",title:"请先选择课程：",width:"15%"},on:{"update:visible":function(t){e.fastVisible=t}}},[i("el-select",{attrs:{placeholder:"请选择课程"},on:{change:e.getLessonNo},model:{value:e.courseNo,callback:function(t){e.courseNo=t},expression:"courseNo"}},e._l(e.courseNoInfo,(function(e,t,a){return i("el-option",{key:a,attrs:{label:e,value:t}})})),1),i("el-select",{staticStyle:{"margin-top":"16px"},attrs:{placeholder:"请选择课号"},model:{value:e.lessonNo,callback:function(t){e.lessonNo=t},expression:"lessonNo"}},e._l(e.lessonNoInfo,(function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})})),1),i("el-dialog",{attrs:{visible:e.fastShowVisible,"append-to-body":"",center:"",title:"快速创建",width:"40%"},on:{"update:visible":function(t){e.fastShowVisible=t}}},[i("el-container",{staticStyle:{height:"500px",width:"100%"}},[i("el-main",[i("ShareView",{attrs:{"question-info":e.questionInfo,"course-no":e.courseNo,"lesson-no":e.lessonNo}})],1)],1)],1),i("br"),i("br"),i("el-button",{staticStyle:{"margin-left":"75%"},attrs:{type:"primary",icon:"el-icon-right",circle:""},on:{click:e.fast_create}})],1)],1)},Gt=[],Ut=(i("4160"),i("a434"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:20}},e._l(e.questionInfo,(function(t,a){return i("el-col",{key:a,attrs:{span:8,xs:24,sm:24,md:24,lg:24,xl:24}},[i("el-card",{staticClass:"box_card",attrs:{shadow:"hover"}},[i("h3",[e._v(e._s("标题："+t.title))]),i("div",[e._v(" "+e._s("创建者："+t.founder)+" ")]),i("div",[e._v(" "+e._s("课 号： "+t.lesson_code)+" ")]),i("div",[e._v(" "+e._s("创建时间： "+t.create_time)+" ")]),i("div",[i("el-button",{staticClass:"card_btn",staticStyle:{"margin-left":"60%"},attrs:{type:"text"},on:{click:function(i){return e.preview(t.id)}}},[e._v("预览")]),i("el-button",{staticClass:"card_btn",attrs:{type:"text"},on:{click:function(i){return e.fastcreate(t.id)}}},[e._v("创建")])],1)])],1)})),1),i("el-dialog",{attrs:{visible:e.detailVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.detailVisible=t}}},[i("el-container",{staticStyle:{height:"500px",width:"100%"}},[i("el-main",[i("preview",{attrs:{"question-list":e.questionList,questionnaire:e.questionnaire}})],1)],1),i("div",{staticClass:"dialog_btn"},[i("el-button",{on:{click:function(t){e.detailVisible=!1}}},[e._v("取消")])],1)],1)],1)}),Wt=[],Rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{staticClass:"main-answer-list"},[i("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[i("h1",[e._v("标题："+e._s(e.questionnaire.questionnaireTitle))]),i("h3",[e._v("课号："+e._s(e.questionnaire.lessonNo))])]),i("el-form",e._l(e.questionList,(function(t,a){return i("div",{key:a},[i("el-card",{staticClass:"box-card"},[i("el-form-item",[i("div",{staticClass:"question-title-div"},[i("div",{staticStyle:{display:"inline"}},[i("b",[e._v(e._s(a+1)+". "+e._s(t.questionTitle))])]),!1===t.questionNullable?i("div",{staticClass:"nullable-star",staticStyle:{display:"inline"}},[e._v(" * ")]):e._e()])]),i("el-form-item",[0===t.questionType?i("el-radio-group",{staticClass:"singleoptiongroup",attrs:{disabled:""}},e._l(t.questionOptions,(function(t,a){return i("el-radio",{key:a,staticClass:"singleoption",attrs:{label:a}},[e._v(e._s(t.myoption)+" ")])})),1):1===t.questionType?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{disabled:"",type:"textarea",placeholder:"请输入内容"}}):e._e()],1)],1)],1)})),0)],1)],1)],1)},Ht=[],Jt={props:{questionList:Array,questionnaire:Object},data:function(){return{}},methods:{},mounted:function(){console.log(this.questionnaire),console.log(111)}},Zt=Jt,Kt=(i("0372"),Object(r["a"])(Zt,Rt,Ht,!1,null,"31a6b036",null)),Xt=Kt.exports,Yt={components:{preview:Xt},name:"ShareView",props:{questionInfo:Array,courseNo:String,lessonNo:String},data:function(){return{detailVisible:!1,questionList:[],questionnaire:{},send_to:0,questionnaireType:0}},methods:{preview:function(e){this.fetchData(e),console.log(this.questionnaire),this.detailVisible=!0},fetchData:function(e){var t=this;this.$http.get("/questionnaire/"+e,{}).then((function(e){if(0===e.data.code){t.questionList=[];var i=e.data.data,a=i.questions;null==i.lesson_info.lesson_code?t.questionnaire.lessonNo="undefined":t.questionnaire.lessonNo=i.lesson_info.lesson_code,t.questionnaire.questionnaireTitle=i.title,t.questionnaireType=i.type,t.send_to=i.sendTo;var n,s=Object(jt["a"])(a);try{for(s.s();!(n=s.n()).done;){var o=n.value,l={questionIndex:o.index,isBoxSelected:!0,questionTitle:o.desc,questionNullable:o.nullable,questionType:o.type,courseGoal:o.target_id,questionOptions:o.items};t.questionList.push(l)}}catch(r){s.e(r)}finally{s.f()}t.$message({message:"问卷已读取",duration:1e3})}else t.$message({message:"code!=0！读取失败！",duration:1e3})})).catch((function(e){console.log(e),t.questionList=[],t.$message({message:"似乎没有设置选项",duration:1e3})}))},fastcreate:function(e){var t=this;this.$http.post("/questionnaire/clone",{id:e,no:this.lessonNo}).then((function(e){0===e.data.code&&t.$router.push({name:"questionnaire_edit_page",params:{qid:e.data.data.id}})}))}}},ei=Yt,ti=(i("a0d2"),Object(r["a"])(ei,Ut,Wt,!1,null,"cf44f8aa",null)),ii=ti.exports,ai={components:{ShareView:ii},data:function(){return{idType:null,funcChecked:!1,funcBthShow:!1,funcBtnData:[{id:"questionnaire-btn-create",value:"创建",type:"primary",icon:"el-icon-edit"},{id:"questionnaire-btn-post",value:"发布",type:"success",icon:"el-icon-position"},{id:"questionnaire-btn-stop",value:"停止",type:"warning",icon:"el-icon-remove-outline"},{id:"questionnaire-btn-delete",value:"删除",type:"danger",icon:"el-icon-delete"},{id:"questionnaire-btn-fastcreate",value:"快速创建",type:"primary",icon:"el-icon-s-opportunity"}],dropDownData:[{id:"questionnaire-btn-post",value:"发布",type:"success",icon:"el-icon-position"},{id:"questionnaire-btn-stop",value:"停止",type:"warning",icon:"el-icon-remove-outline"},{id:"questionnaire-btn-delete",value:"删除",type:"danger",icon:"el-icon-delete"}],questionnarieData:[],student:!1,teacher:!1,questionInfo:[],lessonNo:"",lessonNoInfo:[],courseNoInfo:{},courseNo:"",fastVisible:!1,fastShowVisible:!1}},mounted:function(){this.$emit("setActiveMenuItem","/manage/questionnaire"),this.onIdentityJudge(),this.getQuestionnaireData()},methods:{onIdentityJudge:function(){this.idType=window.localStorage.getItem("type"),2==this.idType?this.student=!0:1==this.idType&&(this.teacher=!0),this.funcBthShow=2!=this.idType},onClickQuestionnaireCard:function(e){e.checked=!e.checked},onFuncCheckboxChanged:function(){var e=this;this.questionnarieData.forEach((function(t){t.checked=e.funcChecked}))},onClickFuncBtn:function(e){var t=this;if("创建"==e)this.$router.push({path:"/questionnaire/create"});else if("发布"==e||"停止"==e){var i=[];this.questionnarieData.forEach((function(e){e.checked&&i.push(e)})),this.changeQuestionnaireStatus(i,e)}else"删除"==e?this.$msgbox.confirm("是否要删除问卷?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",callback:function(e,i){if("confirm"==e){var a=[],n=[],s=0;t.questionnarieData.forEach((function(e){e.checked&&(a.push(e.id),n.push(s)),s++})),n.reverse(),t.deleteQuestionnaire(a,n)}}}):"快速创建"===e&&(this.fastVisible=!0)},onClickFuncMenu:function(e){var t=this;"发布"==e.value||"停止"==e.value?this.changeQuestionnaireStatus([e.target],e.value):"删除"==e.value&&this.$msgbox.confirm("是否要删除问卷?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",callback:function(i,a){"confirm"==i&&t.deleteQuestionnaire([e.target.id],[e.index])}})},changeQuestionnaireStatus:function(e,t){var i=this;e.forEach((function(e){"发布"==t&&"收集中"!=e.status?i.setQuestionnaireStatus(e,1,"收集中"):"停止"==t&&"已截至"!=e.status&&i.setQuestionnaireStatus(e,2,"已截至")}))},getQuestionnaireData:function(){var e=this;this.$http.get("/user/myquestionnaire").then((function(t){var i=t.data;0===i.code?(i.data.my_questionnaire.forEach((function(t){t.checked=!1,t.sendTo===parseInt(e.idType)&&1===t.status?t.is_need_fill=!0:t.is_need_fill=!1,""!=t.course_code&&(e.courseNoInfo[t.course_code]=t.lesson_name),0==t.status?(t.status="未发布",t.editable=!0):1==t.status?t.status="收集中":2==t.status&&(t.status="已截止",t.editable=!0),t.ex=[{key:"[作者]：",value:t.founder},{key:"[课程]：",value:t.lesson_code+"-"+t.lesson_name},{key:"[专业]：",value:t.major},{key:"[时间]：",value:t.create_time+"-"+t.end_time}]})),e.questionnarieData=i.data.my_questionnaire):2===i.code&&e.$logout()})).catch((function(e){console.log("getQuestionnaireDataError",e)}))},setQuestionnaireStatus:function(e,t,i){var a=this;this.$http.post("/questionnaire/status",{id:e.id,status:t}).then((function(n){0===n.data.code?(e.status=i,e.editable=0===t||2===t):2===n.data.code&&a.$logout()}))},deleteQuestionnaire:function(e,t){var i=this;this.$http.post("/questionnaire/delete",{id:e}).then((function(e){console.log(e.data),0==e.data.code?t.forEach((function(e){i.questionnarieData.splice(e,1)})):2==e.data.code&&i.$logout()}))},go_fill:function(e,t){this.$router.push({name:"questionnaire_fillin_page",params:{qid:e,status:t}})},go_edit:function(e,t,i,a){this.$router.push({name:"questionnaire_edit_page",params:{qid:e,title:t,lessonNo:i,type:a}})},fast_create:function(){var e=this;""!==this.lessonNo&&""!==this.courseNo?this.$http.get("/questionnaire/"+this.courseNo+"/all",{}).then((function(t){if(0===t.data.code){var i=[];e.questionInfo=[],i=t.data.data.list;var a,n=Object(jt["a"])(i);try{for(n.s();!(a=n.n()).done;){var s=a.value;e.questionInfo.push(s)}}catch(o){n.e(o)}finally{n.f()}console.log(e.questionInfo),e.fastShowVisible=!0}})):this.$message({message:"请选择课程，课号！",duration:2e3})},getLessonNo:function(){var e=this;this.lessonNo="",this.$http.get("/course/mylessonno/"+this.courseNo,{}).then((function(t){if(0===t.data.code){var i=t.data.data;e.lessonNoInfo=i.lesson_no}}))}}},ni=ai,si=(i("4bf7"),Object(r["a"])(ni,Mt,Gt,!1,null,"8b0588e2",null)),oi=si.exports,li=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"grid-row",attrs:{span:24}},[i("el-timeline",e._l(e.questionnarieData,(function(t,a){return i("el-timeline-item",{key:t.id,attrs:{timestamp:t.time,placement:"top"}},[i("div",[i("el-card",{attrs:{shadow:"hover"}},[i("div",[e._v(e._s(a+1)+". [ID]："+e._s(t.id)+" - [状态]："+e._s(t.status))]),i("h3",{staticStyle:{clear:"both","margin-top":"32px","margin-left":"20px"}},[e._v(" 标题："+e._s(t.title)+" ")]),i("el-table",{attrs:{data:t.ex,"show-header":!1}},[i("el-table-column",{attrs:{prop:"key",align:"center",label:"key",width:"100"}}),i("el-table-column",{attrs:{prop:"value",label:"value"}})],1),i("el-button",{staticClass:"st-btn",attrs:{type:"primary",round:""},on:{click:function(i){return e.go_analyze(t.id,t.type)}}},[e._v("查看统计结果")])],1)],1)])})),1)],1)],1)},ri=[],ui={data:function(){return{questionnarieData:[]}},mounted:function(){this.$emit("setActiveMenuItem","/manage/statistics"),this.getQuestionnaireData()},methods:{getQuestionnaireData:function(){var e=this;this.$http.get("/user/myquestionnaire").then((function(t){var i=t.data,a=[];0===i.code?(i.data.my_questionnaire.forEach((function(e,t){2===e.status&&(e.checked=!1,e.status="已截止",e.ex=[{key:"[作者]：",value:e.founder},{key:"[课号]：",value:e.lesson_code},{key:"[专业]：",value:e.major},{key:"[时间]：",value:e.create_time+"-"+e.end_time}],a.push(e))})),console.log(a),e.questionnarieData=a):2==i.code&&e.$logout()})).catch((function(e){console.log("getQuestionnaireDataError",e)}))},go_analyze:function(e,t){this.$router.push({name:"analyze_page",params:{qid:e,type:t}})}}},ci=ui,di=(i("4ceb"),Object(r["a"])(ci,li,ri,!1,null,"328cec4b",null)),pi=di.exports,mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"st-wrapper"},[i("el-divider",{staticClass:"st-divider",attrs:{"content-position":"center"}},[e._v("密码修改")]),i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"原密码：",prop:"oldPasswd","label-width":"100px"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入原密码",clearable:""},model:{value:e.form.oldPasswd,callback:function(t){e.$set(e.form,"oldPasswd",t)},expression:"form.oldPasswd"}})],1),i("el-form-item",{attrs:{label:"新密码：",prop:"newPasswd","label-width":"100px"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入新密码","show-password":""},model:{value:e.form.newPasswd,callback:function(t){e.$set(e.form,"newPasswd",t)},expression:"form.newPasswd"}})],1),i("el-form-item",{attrs:{label:"再输一遍：",prop:"passwdAgain","label-width":"100px"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入新密码","show-password":""},model:{value:e.form.passwdAgain,callback:function(t){e.$set(e.form,"passwdAgain",t)},expression:"form.passwdAgain"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{round:""},on:{click:e.onClearPasswd}},[e._v("重置内容")]),i("el-button",{attrs:{type:"primary",round:""},on:{click:e.onSubmitNewPasswd}},[e._v("修改密码")])],1)],1)],1),i("div",{staticClass:"st-wrapper"},[i("el-divider",{staticClass:"st-divider",attrs:{"content-position":"center"}},[e._v("资料修改")]),i("el-table",{attrs:{data:e.tableData,"show-header":!1}},[i("el-table-column",{attrs:{prop:"key",align:"center",label:"key"}}),i("el-table-column",{attrs:{prop:"value",align:"center",label:"value"}})],1),i("el-button",{staticClass:"st-ban-btn",attrs:{disabled:!0,round:""}},[e._v("暂未开放修改，敬请期待！")])],1)])},fi=[],hi={data:function(){return{form:{oldPasswd:"",newPasswd:"",passwdAgain:""},tableData:[],rules:{oldPasswd:[{required:!0,message:"原密码不能为空",trigger:"blur"}],newPasswd:[{required:!0,message:"新密码不能为空",trigger:"blur"}],passwdAgain:[{required:!0,message:"校验的新密码不能为空",trigger:"blur"},{validator:this.validatePasswdAgain,trigger:"blur"}]}}},mounted:function(){this.$emit("setActiveMenuItem","/manage/setting"),this.getUserData()},methods:{validatePasswdAgain:function(e,t,i){this.form.newPasswd!=this.form.passwdAgain?i(new Error("两次输入密码不一致")):i()},onClearPasswd:function(){var e=this;this.$msgbox.confirm("是否清空密码内容?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t,i){"confirm"==t&&e.$refs.form.resetFields()}})},onSubmitNewPasswd:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$http.post("/user/password",{old:e.form.oldPasswd,new:e.form.newPasswd}).then((function(t){var i=t.data;console.log(i),0==i.code?(console.log(i.data.token),e.$setAuth(i.data.token),e.$cookies.set("token",i.data.token),window.localStorage.setItem("token",i.data.token),e.$message({message:i.msg,center:!0,duration:2500})):2==i.code?e.$logout():e.$message({type:"success",message:i.msg,center:!0,duration:2500})})).catch((function(e){console.log("setNewPasswdError",e)}))}))},getUserData:function(){var e=this;this.$http.get("/user/info").then((function(t){var i=t.data;console.log(i),0==i.code?e.tableData=i.data.info:2==i.code&&e.$logout()})).catch((function(e){console.log("getUserDataError",e)}))}}},vi=hi,bi=(i("fdc8"),Object(r["a"])(vi,mi,fi,!1,null,"4778157a",null)),gi=bi.exports,yi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb-page"},[i("div",{staticClass:"fb-title"},[i("el-tag",{attrs:{type:"warning"}},[i("i",{staticClass:"el-icon-info"}),e._v(" 欢迎反馈~我们很高兴能够收到您的建议或者吐槽... ")])],1),i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"反馈标题：",prop:"title"}},[i("el-input",{attrs:{placeholder:"请填写反馈的标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"反馈类型："}},[i("el-select",{model:{value:e.form.ftype,callback:function(t){e.$set(e.form,"ftype",t)},expression:"form.ftype"}},[i("el-option",{attrs:{label:"功能BUG",value:"shanghai"}}),i("el-option",{attrs:{label:"功能建议",value:"beijing"}}),i("el-option",{attrs:{label:"其它",value:"beijing"}})],1)],1),i("el-form-item",{attrs:{label:"联系方式：",prop:"contact"}},[i("el-input",{attrs:{placeholder:"请留下您的联系方式(QQ/微信/邮箱)"},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),i("el-form-item",{attrs:{label:"反馈内容：",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:16,maxRows:16},placeholder:"这里填写您的建议或者吐槽..."},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{round:""},on:{click:e.onClear}},[e._v("重置")]),i("el-button",{attrs:{type:"primary",round:""},on:{click:e.onSubmit}},[e._v("立即提交")])],1)],1)],1)},_i=[],qi={data:function(){return{form:{title:"",ftype:"功能BUG",contact:"",desc:""},rules:{title:[{required:!0,message:"反馈标题不能为空",trigger:"blur"}],contact:[{required:!0,message:"联系方式不能为空",trigger:"blur"}],desc:[{required:!0,message:"反馈内容不能为空",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$message({type:"success",message:"您的反馈我们已经收到了！",center:!0,duration:2500})}))},onClear:function(){var e=this;this.$msgbox.confirm("即将清空填写内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(t,i){"confirm"==t&&e.$refs.form.resetFields()}})}}},wi=qi,xi=(i("8a8e"),Object(r["a"])(wi,yi,_i,!1,null,"3753eb63",null)),ki=xi.exports,Ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v(" welcome to help page ")])},$i=[],Si={},Ti=Si,Vi=Object(r["a"])(Ti,Ci,$i,!1,null,"472d9111",null),Ni=Vi.exports,Ii=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",e._l(e.courseData,(function(t){return i("el-col",{key:t.lesson_code,attrs:{span:e.spans}},[i("el-card",{staticClass:"col-card",attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[i("div",{staticClass:"card-bg"},[i("span",{staticClass:"card-title"},[e._v(" "+e._s(t.course_name)+" ")]),i("span",{staticClass:"card-sub-title"},[e._v(e._s(t.grade)+" - "+e._s(t.major_name))]),i("div",[i("span",{staticClass:"card-code"},[i("i",{staticClass:"el-icon-c-scale-to-original"},[e._v(e._s(t.lesson_code))])]),i("span",{staticClass:"card-term"},[e._v(e._s(t.term))])])]),i("div",{staticClass:"card-under-bg"},[i("span",{staticClass:"card-teacher"},[i("i",{staticClass:"el-icon-s-flag"},[e._v(e._s(t.teacher))])]),i("span",{staticClass:"card-total"},[i("i",{staticClass:"el-icon-s-custom"},[e._v("人数："+e._s(t.total))])])])])],1)})),1)],1)},Li=[],Oi={data:function(){return{spans:4,courseData:[]}},mounted:function(){var e=this;this.$emit("setActiveMenuItem","/manage/course"),this.onClientWidthChanged(document.body.clientWidth),window.addEventListener("resize",(function(){e.onClientWidthChanged(document.body.clientWidth)})),this.getCourseData()},methods:{onClientWidthChanged:function(e){this.spans=e>=1920||e>=1400?6:e>=992||e>=768?8:24},getCourseData:function(){var e=this;this.$http.get("/course/mylesson").then((function(t){var i=t.data;console.log(i),0==i.code?e.courseData=i.data.lessons:2==i.code&&e.$logout()})).catch((function(e){console.log("getCourseDataError",e)}))}}},Bi=Oi,Di=(i("89cc"),Object(r["a"])(Bi,Ii,Li,!1,null,"2fc90ee2",null)),Ei=Di.exports,Ai=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"create-content",style:e.marginStyle},[i("div",{staticClass:"create-title"},[e._v(" 请先填写一些问卷的基础信息 ")]),i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:24}},[i("el-card",{staticClass:"create-questionnaire-form",attrs:{shadow:"hover"}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"问卷标题：",prop:"title","label-width":"100px"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-edit-outline",placeholder:"请输入问卷的标题(不能超过120个字)",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"分发对象：","label-width":"100px"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.target,callback:function(t){e.$set(e.form,"target",t)},expression:"form.target"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1)],1),i("div",{staticClass:"create-sub-title"},[e._v(" 请选择问卷类型 ")]),i("el-row",{attrs:{gutter:20}},e._l(e.typeData,(function(t){return i("el-col",{key:t.id,attrs:{span:e.spans}},[i("div",{on:{click:function(i){return e.onClickCreateQuestionnaireCard(t.tid)}}},[i("el-card",{staticClass:"create-questionnaire-card",attrs:{shadow:t.shadow}},[i("i",{class:t.icon,style:t.style}),i("span",[e._v(" "+e._s(t.value)+" ")]),i("div",{staticClass:"create-questionnaire-desc"},[e._v(" "+e._s(t.desc)+" ")])])],1)])})),1),i("div",{staticClass:"create-sub-title"},[e._v(" 点击按钮即可完成创建 ")]),i("div",{staticClass:"create-questionnaire-btn"},[i("el-button",{attrs:{type:"primary",round:""},on:{click:e.onClickCreateQuestionnaireBtn}},[e._v(" 创建问卷 ")])],1)],1)])},ji=[],Qi={data:function(){return{tid:null,spans:6,marginStyle:{"margin-left":"20%","margin-right":"20%"},typeData:[{id:"qtype_common",tid:0,value:"普通问卷",desc:"丰富题型，易于编辑",icon:"el-icon-success",path:"/manage/feedback",style:{color:"#2672FF"},shadow:"hover"},{id:"qtype_class",tid:1,value:"课程问卷",desc:"了解课程掌握情况",icon:"el-icon-s-order",path:"/manage/help",style:{color:"#FFBD3A"},shadow:"hover"},{id:"qtype_vote",value:"毕业问卷",desc:"敬请期待...",icon:"el-icon-s-data",path:"/logout",style:{color:"#00BF6F"},shadow:"hover"},{id:"qtype_more",value:"更多类型",desc:"敬请期待...",icon:"el-icon-menu",path:"/logout",style:{color:"#FF6D56"},shadow:"hover"}],options:[{value:2,label:"学生"},{value:3,label:"应届毕业生"},{value:5,label:"企业人员"}],form:{title:"",target:2},rules:{title:[{required:!0,message:"问卷标题不能为空",trigger:"blur"},{max:120,message:"问卷标题不能超过120个字哦！",trigger:"blur"}]}}},mounted:function(){var e=this;this.$emit("setActiveBreadItem","bread_create_page"),this.onClientWidthChanged(document.body.clientWidth),window.addEventListener("resize",(function(){e.onClientWidthChanged(document.body.clientWidth)}))},methods:{onClientWidthChanged:function(e){if(e>=992){this.spans=6;var t=parseInt(e/1920*20)+"%";this.marginStyle["margin-left"]=t,this.marginStyle["margin-right"]=t}else this.spans=12,this.marginStyle["margin-left"]=0,this.marginStyle["margin-right"]=0},onClickCreateQuestionnaireCard:function(e){null!=e?(this.tid=e,this.typeData.forEach((function(t){t.tid==e?t.shadow="always":t.shadow="hover"}))):this.$message({message:"暂不支持该问卷类型！敬请期待！",duration:2e3})},onClickCreateQuestionnaireBtn:function(){var e=this;this.$refs.form.validate((function(t){t&&null!=e.tid&&e.$http.post("/questionnaire/create",{type:e.tid,title:e.form.title,send_to:e.form.target}).then((function(t){var i=t.data;0==i.code?e.$router.push({name:"questionnaire_edit_page",params:{qid:i.data.id,title:e.form.title,type:e.tid}}):2==i.code&&e.$logout()})).catch((function(e){console.log("getQuestionnaireDataError",e)}))}))}}},Pi=Qi,Fi=(i("e8d6"),Object(r["a"])(Pi,Ai,ji,!1,null,"3f0272ab",null)),zi=Fi.exports,Mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"main-question-list"},[i("div",{staticStyle:{padding:"0",display:"inline"}},[i("el-card",{staticStyle:{position:"relative","text-align":"center"}},[i("div",{staticClass:"box-is-not-selected-wrapper",on:{click:e.editTitle}},[!1===e.questionnaire.isBoxSelected?i("div",{staticClass:"box-is-not-selected"},[i("h1",[e._v(e._s(e.questionnaire.questionnaireTitle))]),1===e.questionnaireType?i("div",[i("h3",[e._v(e._s(e.questionnaire.lessonNo))])]):e._e(),i("h3",[e._v("开始时间："+e._s(e.questionnaire.time[0].toLocaleDateString()+" "+e.questionnaire.time[0].toLocaleTimeString()))]),i("h3",[e._v("结束时间："+e._s(e.questionnaire.time[1].toLocaleDateString()+" "+e.questionnaire.time[1].toLocaleTimeString()))])]):e._e(),i("div",{staticClass:"edit-icon"},[i("i",{staticClass:"el-icon-edit-outline"})])]),!0===e.questionnaire.isBoxSelected?i("div",[i("el-form",[i("el-form-item",[e._v(" 标题： "),i("el-input",{staticStyle:{"max-width":"20%"},attrs:{type:"text",placeholder:"请输入问卷标题"},model:{value:e.questionnaire.questionnaireTitle,callback:function(t){e.$set(e.questionnaire,"questionnaireTitle",t)},expression:"questionnaire.questionnaireTitle"}})],1),1===e.questionnaireType?i("el-form-item",[e._v(" 课号： "),i("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:"请选择"},on:{change:e.fetchmylesson},model:{value:e.questionnaire.lessonNo,callback:function(t){e.$set(e.questionnaire,"lessonNo",t)},expression:"questionnaire.lessonNo"}},e._l(this.questionnaire.mylessons,(function(e,t){return i("el-option",{key:t,attrs:{label:e.lesson_code+"-"+e.course_name,value:e.lesson_code}})})),1)],1):e._e(),i("el-form-item",[e._v(" 时间： "),i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.questionnaire.time,callback:function(t){e.$set(e.questionnaire,"time",t)},expression:"questionnaire.time"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.saveQuestionnaireTitle}},[e._v("保存")]),i("el-button",{on:{click:e.resetQuestionnaireTitle}},[e._v("重置")])],1)],1)],1):e._e()])],1),i("div",{staticStyle:{height:"10px"}}),e._l(e.questionList,(function(t,a){return e.hackReset?i("Question",{key:a,attrs:{"is-box-selected":t.isBoxSelected,"question-index":a,"question-title":t.questionTitle,"question-nullable":t.questionNullable,"question-type":t.questionType,"question-options":t.questionOptions,"course-goals":e.courseGoals,"course-goal":t.courseGoal,"questionnaire-type":e.questionnaireType},on:{clickUnSelected:function(t){return e.selectOneBox(a)},clickSelected:function(t){return e.selectOneBox(a)},saveOneQuestion:e.saveOneQuestion,resetQuestion:function(t){return e.resetQuestion(a)},clickDelete:function(t){return e.deleteOneBox(a)}}}):e._e()})),!1===e.hackReset?i("div",[i("el-alert",{attrs:{title:"错误提示",type:"error",center:"",description:"请务必先选择您的课号！"}})],1):e._e(),i("el-card",{staticClass:"add-question",attrs:{"body-style":{padding:"10px"},shadow:"hover"}},[i("div",{staticClass:"add-question-inner",on:{click:function(t){return e.addNewQuestion(0)}}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 添加问题 ")])]),i("el-card",{staticStyle:{"text-align":"center"}},[i("el-dialog",{attrs:{title:"确认删除？",visible:e.deleteVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.deleteVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.deleteQuestionnaire}},[e._v("确认删除")])],1)]),i("el-dialog",{attrs:{title:"发布成功",visible:e.releaseVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.releaseVisible=t}}},[e._v(" 问卷链接为： "),i("el-link",{staticClass:"copy-link",attrs:{target:"_blank","data-clipboard-text":"/fillin/"+this.$route.params.qid,"data-clipboard-action":"copy",type:"primary"},on:{click:e.copy}},[e._v(" "+e._s(this.questionnaire.questionnaireTitle)+"-点击复制 ")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.releaseEnd}},[e._v("关 闭")])],1)],1),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.deleteVisible=!0}}},[e._v("删 除")]),i("el-button",{on:{click:e.saveQuestionnaire}},[e._v("保 存")]),i("el-button",{attrs:{type:"primary"},on:{click:e.releaseQuestionnaire}},[e._v("发 布")])],1)],2)])},Gi=[],Ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{position:"relative"}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover","body-style":{padding:"0"}}},[e.isBoxSelected?e._e():i("div",{staticClass:"box-is-not-selected-wrapper",on:{click:e.clickUnSelected}},[i("div",{staticClass:"box-is-not-selected"},[i("div",{staticClass:"question-title-div"},[i("div",{staticStyle:{width:"80%"}},[e._v(e._s(e.questionIndex+1)+". "+e._s(e.questionTitleValue)+" "),!1===e.questionNullableValue?i("div",{staticClass:"nullable-star",staticStyle:{display:"inline"}},[e._v("* ")]):e._e()])]),0===e.typeValue?i("el-radio-group",{model:{value:e.optionsValue,callback:function(t){e.optionsValue=t},expression:"optionsValue"}},e._l(e.optionsValue,(function(t,a){return i("el-radio",{key:a},[e._v(e._s(t.myoption))])})),1):1===e.typeValue?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{type:"textarea",placeholder:"请输入内容（多行文本）"}}):e._e()],1),i("div",{staticClass:"edit-icon"},[i("i",{staticClass:"el-icon-edit-outline"})])]),e.isBoxSelected?i("div",{staticClass:"box-is-selected"},[i("div",{staticClass:"question-index"},[e._v(e._s(e.questionIndex+1)+". ")]),i("el-form",[i("el-form-item",{attrs:{label:"标题："}},[i("el-input",{staticStyle:{"max-width":"60%"},attrs:{type:"text",size:"medium",placeholder:"请输入标题"},model:{value:e.questionTitleValue,callback:function(t){e.questionTitleValue=t},expression:"questionTitleValue"}})],1),i("el-form-item",{attrs:{label:"类型："}},[i("el-select",{attrs:{placeholder:"请选择",size:"medium"},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"是否选填："}},[i("el-select",{attrs:{placeholder:"是否可以不填写"},model:{value:e.questionNullableValue,callback:function(t){e.questionNullableValue=t},expression:"questionNullableValue"}},[i("el-option",{attrs:{value:!0,label:"是"}}),i("el-option",{attrs:{value:!1,label:"否"}})],1)],1),1===e.questionnaireType&&0===e.questionType?i("el-form-item",{attrs:{label:"课程目标："}},[i("el-select",{attrs:{placeholder:"请选择",size:"medium"},on:{change:e.clickOption},model:{value:e.goalValue,callback:function(t){e.goalValue=t},expression:"goalValue"}},e._l(e.courseGoals,(function(e,t){return i("el-option",{key:t,attrs:{label:"课程目标"+(t+1),value:e.id}})})),1),i("div",{attrs:{id:"descdiv"}},[e._v("目标描述： "+e._s(this.goalDesc))])],1):e._e(),i("el-divider",{staticClass:"divider"}),0===e.typeValue?i("div",e._l(e.optionsValue,(function(t,a){return i("el-form-item",{key:a},[e._v(" 选项"+e._s(a+1)+"： "),i("el-input",{staticStyle:{"max-width":"200px"},model:{value:e.optionsValue[a].myoption,callback:function(t){e.$set(e.optionsValue[a],"myoption",t)},expression:"optionsValue[index].myoption"}}),i("br"),i("div",{staticStyle:{"padding-top":"5px"}},[i("label",{staticStyle:{"padding-right":"9px"}},[e._v("分值：")]),i("el-input",{staticStyle:{"max-width":"200px"},attrs:{type:"number",min:"0",max:"100","validate-event":!0},model:{value:e.optionsValue[a].score,callback:function(t){e.$set(e.optionsValue[a],"score",e._n(t))},expression:"optionsValue[index].score"}})],1),i("el-tooltip",{attrs:{effect:"light",content:"在下方添加","open-delay":200,"hide-after":1500,placement:"top"}},[i("el-button",{staticClass:"add-option-button",attrs:{size:"medium",round:""},on:{click:e.addOption}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-tooltip",{attrs:{effect:"light",content:"删除本选项","open-delay":200,"hide-after":1500,placement:"top"}},[i("el-button",{staticClass:"delete-option-button",attrs:{size:"medium",round:""},on:{click:function(t){return e.deleteOption(a)}}},[i("i",{staticClass:"el-icon-delete"})])],1)],1)})),1):e._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.saveOneQuestion}},[e._v("保存")]),i("el-button",{on:{click:e.resetQuestion}},[e._v("重置")])],1)],1)],1):e._e(),i("el-button",{staticClass:"delete-button",attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.clickDelete}})],1)],1)},Wi=[],Ri=(i("a9e3"),{name:"Question",props:{isBoxSelected:Boolean,questionIndex:Number,questionTitle:String,questionNullable:Boolean,questionType:Number,questionOptions:Array,courseGoals:Array,courseGoal:Number,questionnaireType:Number},methods:{clickUnSelected:function(){this.$emit("clickUnSelected")},saveOneQuestion:function(){this.$emit("saveOneQuestion",this.questionData),this.$emit("clickSelected")},resetQuestion:function(){this.$emit("resetQuestion"),this.questionTitleValue="请输入标题",this.questionNullableValue=!1,this.typeValue="not_selected",this.optionsValue=[{myoption:"",score:0}]},clickDelete:function(){this.$emit("clickDelete")},addOption:function(){this.optionsValue.push({myoption:"",score:0})},deleteOption:function(e){this.optionsValue.splice(e,1)},clickOption:function(){var e,t=Object(jt["a"])(this.courseGoals);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(i.id===this.goalValue){this.goalDesc=i.desc;break}}}catch(a){t.e(a)}finally{t.f()}}},updated:function(){1===this.questionnaireType&&this.clickOption()},data:function(){return{typeOptions:[{value:"not_selected",label:"请输入"},{value:0,label:"单选"},{value:1,label:"主观题"}],optionsValue:this.questionOptions,typeValue:this.questionType,questionTitleValue:this.questionTitle,questionNullableValue:this.questionNullable,goalValue:this.courseGoal,goalDesc:""}},computed:{questionData:function(){return{questionIndex:this.questionIndex,questionOptions:this.optionsValue,questionTitle:this.questionTitleValue,questionType:this.typeValue,questionNullable:this.questionNullableValue,courseGoal:this.goalValue}}}}),Hi=Ri,Ji=(i("e27b"),Object(r["a"])(Hi,Ui,Wi,!1,null,"19562a0e",null)),Zi=Ji.exports,Ki=i("b311"),Xi=i.n(Ki),Yi={name:"MainQuestionList",components:{Question:Zi},data:function(){return{questionList:[],questionnaire:{isBoxSelected:!1,lessonNo:"",questionnaireTitle:"请输入标题",time:[new Date,new Date],mylessons:[]},deleteVisible:!1,deleted:!1,releaseVisible:!1,hackReset:!0,questionnaireType:0,courseGoals:[],courseNo:""}},methods:{fetchData:function(){var e=this;this.$http.get("/course/mylesson",{}).then((function(t){var i,a=t.data.data.lessons,n=Object(jt["a"])(a);try{for(n.s();!(i=n.n()).done;){var s=i.value;e.questionnaire.mylessons.push(s)}}catch(o){n.e(o)}finally{n.f()}})),this.$http.get("/questionnaire/"+this.$route.params.qid,{}).then((function(t){var i=t.data.data;e.questionnaireType=i.type,e.questionnaire.questionnaireTitle=i.title,""!==i.start_time&&(e.questionnaire.time[0]=new Date(i.start_time),e.questionnaire.time[1]=new Date(i.end_time));var a,n=i.questions,s=[],o=Object(jt["a"])(n);try{for(o.s();!(a=o.n()).done;){var l=a.value,r={questionIndex:l.index,isBoxSelected:!1,questionTitle:l.desc,questionNullable:l.nullable,questionType:l.type,courseGoal:l.target_id,questionOptions:l.items};s.push(r)}}catch(u){o.e(u)}finally{o.f()}e.questionList=s,null!==i.lesson_info&&(e.questionnaire.lessonNo=i.lesson_info.lesson_code,e.fetchCourseGoal(i.lesson_info.course_code)),e.$message({message:"问卷已读取",duration:1e3}),1===e.questionnaireType&&""===e.questionnaire.lessonNo&&(console.log("yes"),e.hackReset=!1)}))},selectOneBox:function(e){this.questionList[e].isBoxSelected=!this.questionList[e].isBoxSelected},resetQuestion:function(e){},saveOneQuestion:function(e){var t=e["questionIndex"],i={questionIndex:t,isBoxSelected:!0,questionTitle:e["questionTitle"],questionNullable:e["questionNullable"],questionType:e["questionType"],questionOptions:e["questionOptions"],courseGoal:e["courseGoal"]};this.questionList.splice(t,1,i)},deleteOneBox:function(e){console.log(this.questionList.splice(e,1));for(var t=e;t<this.questionList.length;t++)this.questionList[t].questionIndex--;this.reload()},addNewQuestion:function(e){var t={questionIndex:this.questionList.length,isBoxSelected:!0,questionTitle:"",questionNullable:!1,questionType:e,questionOptions:[{myoption:"能",score:100},{myoption:"大部分能",score:80},{myoption:"部分能",score:60},{myoption:"大部分不能",score:40}],courseGoal:null};this.questionList.push(t)},saveQuestionnaireTitle:function(){this.questionnaire.isBoxSelected=!1},resetQuestionnaireTitle:function(){this.questionnaire.isBoxSelected={isBoxSelected:!1,questionnaireTitle:"请输入标题",questionnaireId:this.$route.params.qid}},editTitle:function(){this.questionnaire.isBoxSelected=!0},saveQuestionnaire:function(){var e=this;this.$http.post("/questionnaire/edit",{questionnaire:{questionnaireId:parseInt(this.$route.params.qid),questionnaireTitle:this.questionnaire.questionnaireTitle,lessonNo:this.questionnaire.lessonNo,startTime:this.questionnaire.time[0].getTime(),endTime:this.questionnaire.time[1].getTime()},questionList:this.questionList}).then((function(t){var i=t.data;0===i.code?(e.$message({message:"问卷已保存",duration:1e3}),e.$router.push("/manage/questionnaire")):e.$message({message:"error！问卷未保存！",duration:1e3})})).catch((function(){e.$message({message:"error！问卷未保存！",duration:1e3})}))},deleteQuestionnaire:function(){var e=this;this.deleteVisible=!1,this.$http.post("/questionnaire/delete",{id:[this.$route.params.qid]}).then((function(t){console.log(t.data),0==t.data.code?(e.$message({message:"删除成功",duration:1e3}),e.$router.back()):2==t.data.code&&(e.$message({message:"删除失败",duration:1e3}),e.deleteVisible=!0)}))},releaseQuestionnaire:function(){var e=this;this.$http.post("/questionnaire/edit",{questionnaire:{questionnaireId:parseInt(this.$route.params.qid),questionnaireTitle:this.questionnaire.questionnaireTitle,lessonNo:this.questionnaire.lessonNo,startTime:this.questionnaire.time[0].getTime(),endTime:this.questionnaire.time[1].getTime()},questionList:this.questionList}).then((function(){e.$http.post("/questionnaire/status",{id:e.$route.params.qid,status:1}).then((function(t){0===t.data.code?e.$message({message:"问卷已发布",duration:1e3}):e.$message({message:"error! 问卷未发布",duration:1e3})})).catch((function(){e.$message({message:"error！问卷未发布！",duration:1e3})})),e.releaseEnd()})).catch((function(){e.$message({message:"error！问卷未发布！",duration:1e3})})),this.releaseVisible=!0},releaseEnd:function(){this.releaseVisible=!1,this.$router.push("/questionnaire/done")},reload:function(){var e=this;this.hackReset=!1,this.$nextTick((function(){e.hackReset=!0}))},copy:function(){var e=this,t=new Xi.a(".copy-link");t.on("success",(function(i){console.log("复制成功"),e.$message({message:"复制成功",duration:1e3}),t.destroy()})),t.on("error",(function(e){console.log("该浏览器不支持自动复制"),t.destroy()}))},fetchmylesson:function(e){var t=this;this.hackReset=!0;var i,a="",n=Object(jt["a"])(this.questionnaire.mylessons);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.lesson_code===e){if(a=s.course_code,a===this.courseNo)return;this.courseNo=a,this.$http.get("course/target/"+a,{}).then((function(e){var i,a=e.data.data.Targets,n=[],s=Object(jt["a"])(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;n.push(o)}}catch(l){s.e(l)}finally{s.f()}t.courseGoals=n})),this.reload();break}}}catch(o){n.e(o)}finally{n.f()}},fetchCourseGoal:function(e){var t=this;this.$http.get("course/target/"+e,{}).then((function(e){var i,a=e.data.data.Targets,n=[],s=Object(jt["a"])(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;n.push(o)}}catch(l){s.e(l)}finally{s.f()}t.courseGoals=n})),console.log(this.courseGoals),this.reload()}},created:function(){null!=this.$route.params.type&&(this.questionnaireType=this.$route.params.type),this.$emit("setActiveBreadItem","bread_edit_page"),null!=this.$route.params.qid&&this.fetchData()}},ea=Yi,ta=(i("7124"),Object(r["a"])(ea,Mi,Gi,!1,null,"da0bbc78",null)),ia=ta.exports,aa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{staticClass:"main-answer-list",attrs:{sm:24,md:{span:18,offset:3},lg:{span:16,offset:4},xl:{span:14,offset:5}}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[!1===e.questionnaire.isBoxSelected?i("div",[i("h1",[e._v("标题："+e._s(e.questionnaire.questionnaireTitle))]),i("h3",[e._v("课号："+e._s(e.questionnaire.lessonNo))])]):e._e()]),i("el-form",[e._l(e.questionList,(function(t,a){return i("div",{key:a},[i("el-card",{staticClass:"box-card"},[i("el-form-item",[i("div",{staticClass:"question-title-div"},[i("div",{staticStyle:{display:"inline"}},[i("b",[e._v(e._s(a+1)+". "+e._s(t.questionTitle))])]),!1===t.questionNullable?i("div",{staticClass:"nullable-star",staticStyle:{display:"inline"}},[e._v(" * ")]):e._e()])]),i("el-form-item",[0===t.questionType?i("el-radio-group",{staticClass:"singleoptiongroup",attrs:{disabled:e.disabled},model:{value:e.answerList[a].answerIndex,callback:function(t){e.$set(e.answerList[a],"answerIndex",t)},expression:"answerList[index].answerIndex"}},e._l(t.questionOptions,(function(t,a){return i("el-radio",{key:a,staticClass:"singleoption",attrs:{label:a}},[e._v(e._s(t.myoption)+" ")])})),1):1===t.questionType?i("el-input",{staticStyle:{"max-width":"80%"},attrs:{disabled:e.disabled,type:"textarea",placeholder:"请输入内容"},model:{value:e.answerList[a].answerText,callback:function(t){e.$set(e.answerList[a],"answerText",t)},expression:"answerList[index].answerText"}}):e._e()],1)],1)],1)})),i("el-form-item",[i("el-card",{staticClass:"box-card",staticStyle:{width:"95%"}},[i("el-dialog",{attrs:{width:"70%",title:"确认提交？",visible:e.submitVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.submitVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.submitVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAnswer}},[e._v("确认提交")])],1)]),i("el-dialog",{attrs:{width:"70%",title:"确认保存？",visible:e.saveVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.saveVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.saveVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveAnswer}},[e._v("确认保存")])],1)]),i("el-dialog",{attrs:{width:"70%",title:"确认重置？",visible:e.resetVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){e.resetVisible=t}}},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.resetVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.resetAnswer}},[e._v("确认重置")])],1)]),e.buttonVisible?i("div",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitVisible=!0}}},[e._v("提 交")]),i("el-button",{on:{click:function(t){e.saveVisible=!0}}},[e._v("保 存")]),i("el-button",{on:{click:function(t){e.resetVisible=!0}}},[e._v("重 置")])],1):e._e()],1)],1)],2)],1)],1)],1)},na=[],sa={name:"FillIn",data:function(){return{questionList:[],answerList:[],questionnaire:{isBoxSelected:!1,lessonNo:"1911266",questionnaireTitle:"软件项目管理课程目标调查",questionnaireId:this.$route.params.qid},submitVisible:!1,resetVisible:!1,alreadySubmit:null,saveVisible:!1,cannotSubmit:null,buttonVisible:!0,disabled:!1}},computed:{aaa:function(){return{answerList:this.answerList}}},methods:{fetchData:function(){var e=this;this.$http.get("/questionnaire/"+this.$route.params.qid,{}).then((function(t){if(0===t.data.code){var i=t.data.data,a=i.questions,n=[],s=[];!0===i.lock&&(e.disabled=!0,e.buttonVisible=!1),e.questionnaire.lessonNo=i.lesson_info.lesson_code,e.questionnaire.questionnaireTitle=i.title;var o,l=Object(jt["a"])(a);try{for(l.s();!(o=l.n()).done;){var r=o.value,u={questionIndex:r.index,isBoxSelected:!0,questionTitle:r.desc,questionNullable:r.nullable,questionType:r.type,target_id:r.target_id,questionOptions:r.items},c={isBoxSelected:!0,questionId:r.index,questionTitle:r.desc,questionType:r.type,answerIndex:r.my_answer,target_id:r.target_id,answerText:""};1===c.questionType&&(c.answerText=r.my_answer),n.push(u),s.push(c)}}catch(d){l.e(d)}finally{l.f()}e.questionList=n,e.answerList=s,!1===e.buttonVisible?e.$message({message:"问卷已提交，不可更改！",duration:2e3}):e.$message({message:"问卷已读取",duration:1e3})}else e.$message({message:"error！读取失败！",duration:1e3}),e.$router.back()})).catch((function(t){e.$message({message:"error! 读取失败",duration:1e3})}))},submitAnswer:function(){var e,t=this,i=[],a={},n=Object(jt["a"])(this.answerList);try{for(n.s();!(e=n.n()).done;){var s=e.value;0===s.questionType?a={answer:s.answerIndex}:1===s.questionType&&(a={answer:s.answerText}),i.push(a)}}catch(o){n.e(o)}finally{n.f()}this.checkValidate()&&this.$http.post("/questionnaire/submit",{id:this.$route.params.qid,answerList:i}).then((function(){t.submitVisible=!1,t.alreadySubmit=!0,t.cannotSubmit=!0,t.$message({message:"问卷已提交",duration:1e3}),t.$router.back()})).catch((function(){t.$message({message:"error！提交失败！",duration:1e3})}))},saveAnswer:function(){var e,t=this,i=[],a={},n=Object(jt["a"])(this.answerList);try{for(n.s();!(e=n.n()).done;){var s=e.value;0===s.questionType?a=null===s.answerIndex?{answer:-1}:{answer:s.answerIndex}:1===s.questionType&&(a={answer:s.answerText}),i.push(a)}}catch(o){n.e(o)}finally{n.f()}this.$http.post("/questionnaire/save",{id:this.$route.params.qid,answerList:i}).then((function(){t.saveVisible=!1,t.$message({message:"问卷已提交",duration:1e3})})).catch((function(){t.$message({message:"error！提交失败！",duration:1e3})}))},resetAnswer:function(){this.fetchData(),this.resetVisible=!1},checkValidate:function(){var e,t=Object(jt["a"])(this.answerList);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(!0!==i.questionNullable){if(0===i.questionType&&null===i.answerIndex||1===i.questionType&&""===i.answerIndex)return console.log(i.answerSingleCheck),console.log("error"),console.log(this.answerList),this.$message.error(i.questionId%1e3+1+" "+i.questionTitle+" 是必填字段！"),!1}else console.log("nullable",i)}}catch(a){t.e(a)}finally{t.f()}return!0}},mounted:function(){console.log(this.questionList),1===this.$route.params.status&&(this.buttonVisible=!1,this.disabled=!0),this.fetchData(),this.$emit("setActiveBreadItem","bread_fillin_page")}},oa=sa,la=(i("9af1"),Object(r["a"])(oa,aa,na,!1,null,"3cc7ce72",null)),ra=la.exports,ua=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"outlineData"},[i("MainAnalysisList")],1),i("el-divider"),i("div",{staticClass:"questionList"})],1)},ca=[],da=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"main-analysis-list"},[i("el-card",[i("h1",[e._v(e._s(e.questionnaire.title))]),i("div",{staticClass:"description-box"},[i("div",[i("b",[e._v("问卷状态：")]),e._v(e._s(e.questionnaire.status)+" ")]),i("div",[i("b",[e._v("填写人数：")]),e._v(e._s(e.questionnaire.fillCount)+" ")]),i("div",[i("b",[e._v("发布时间：")]),e._v(e._s(e.questionnaire.startTime)+" ")]),i("div",[i("b",[e._v("截止时间：")]),e._v(e._s(e.questionnaire.endTime)+" ")]),e.tabVisible?i("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[i("el-tab-pane",{attrs:{label:"查看选项统计",name:"option"}}),i("el-tab-pane",{attrs:{label:"课程目标达成情况",name:"detail"}})],1):e._e()],1),e.detailVisible?i("el-button",{attrs:{type:"primary",round:"",id:"export_btn"},on:{click:e.exportToExcel}},[e._v("导出")]):e._e()],1),e._l(e.questionList,(function(t,a){return!1===e.detailVisible?i("AnalysisCard",{key:a,attrs:{"question-index":a+1,"question-id":t.questionId,"question-title":t.questionTitle,"question-type":t.questionType,"question-value-list":t.questionValueList}}):e._e()})),e.detailVisible?i("div",[i("el-table",{attrs:{data:e.detailInfo,"default-sort":{prop:"account",order:"ascending"}}},[i("el-table-column",{attrs:{prop:"account",label:"学号"}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{prop:"major",label:"专业"}}),i("el-table-column",{attrs:{prop:"score",label:"得分"}})],1)],1):e._e()],2)])},pa=[],ma=(i("d81d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"analysis-title"},[e._v(e._s(e.questionIndex)+". "+e._s(e.questionTitle))]),i("el-divider"),0===e.questionType?i("div",[i("el-radio-group",{staticClass:"choose-show",model:{value:e.showBar,callback:function(t){e.showBar=t},expression:"showBar"}},[i("el-radio",{attrs:{label:!0}},[e._v("数量")]),i("el-radio",{attrs:{label:!1}},[e._v("占比")])],1),i("el-row",[i("el-col",{attrs:{xs:24,sm:18,md:18,lg:18,xl:18}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showBar,expression:"showBar===true"}],staticClass:"bar-chart",style:{height:e.barHeight},attrs:{id:"barChart"+e.questionIndex}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.showBar,expression:"showBar===false"}],staticClass:"pie-chart",attrs:{id:"pieChart"+e.questionIndex}})]),i("el-col",{attrs:{xs:24,sm:6,md:6,lg:6,xl:6}},[i("el-table",{staticClass:"analysis-table",attrs:{data:e.questionValueList,"default-sort":{prop:"name",order:"ascending"}}},[i("el-table-column",{attrs:{prop:"name",label:"选项"}}),i("el-table-column",{attrs:{prop:"value",label:"人数"}}),i("el-table-column",{attrs:{prop:"static_value",label:"总计"}})],1)],1)],1)],1):e._e()],1)],1)}),fa=[],ha=i("3eba"),va=i.n(ha),ba=(i("94b1"),i("c037"),i("007d"),{name:"AnalysisCard",props:{questionIndex:Number,questionId:Number,questionTitle:String,questionType:Number,questionValueList:Array},mounted:function(){this.fetchData()},methods:{fetchData:function(){console.log(12345,this.questionValueList),this.barHeight=33*this.questionValueList.length+150+"px",this.drawBar(),this.drawPie()},drawBar:function(){var e=va.a.init(document.getElementById("barChart"+this.questionIndex),"light");e.setOption({tooltip:{},grid:{left:"15%"},xAxis:{},yAxis:{data:this.questionValueList.map((function(e){return e["name"]}))},series:[{name:"选择人数",type:"bar",data:this.questionValueList}]})},drawPie:function(){var e=va.a.init(document.getElementById("pieChart"+this.questionIndex),"light");e.setOption({tooltip:{},grid:{left:20},series:[{name:"选择人数",type:"pie",data:this.questionValueList}]})}},data:function(){return{showBar:!0,writeValueList:null,barHeight:"250px"}}}),ga=ba,ya=(i("178a"),Object(r["a"])(ga,ma,fa,!1,null,"814cb34c",null)),_a=ya.exports,qa={name:"MainAnalysisList",components:{AnalysisCard:_a},methods:{fetchData:function(){var e=this;this.$http.get("/questionnaire/"+this.$route.params.qid+"/analyze",{}).then((function(t){var i=t.data.data;e.questionnaire.title=i.title,e.questionnaire.startTime=i.start_time,e.questionnaire.endTime=i.end_time;var a,n=i.questions,s=[],o=Object(jt["a"])(n);try{for(o.s();!(a=o.n()).done;){var l,r=a.value,u=Object(jt["a"])(r.items);try{for(u.s();!(l=u.n()).done;){var c=l.value;s.push({name:c.myoption,value:c.count})}}catch(d){u.e(d)}finally{u.f()}s.sort((function(e,t){return e.value-t.value})),s.push({name:"",static:"总计",static_value:r.total}),e.questionnaire.fillCount=r.total,e.questionList.push({questionId:r.index,questionTitle:r.desc,questionType:r.type,questionValueList:s}),s=[]}}catch(d){o.e(d)}finally{o.f()}console.log(e.questionList)})).catch((function(){e.$message({message:"error！无数据！",duration:1e3})}))},detail:function(){var e=this;this.$http.get("/questionnaire/"+this.$route.params.qid+"/analyze/lesson",{}).then((function(t){if(0===t.data.code){var i=t.data.data;e.detailInfo=i.data,e.detailVisible=!0}else e.$message({message:"error! 读取失败！",duration:1e3})})).catch((function(t){e.$message({message:"error! 服务端无响应！",duration:1e3})}))},tabClick:function(e,t){"detail"===e.name?this.detail():"option"===e.name&&(this.detailVisible=!1)},exportToExcel:function(){var e=this;i.e("chunk-b2a34d90").then(function(){var t=i("376b"),a=t.export_json_to_excel,n=["学号","姓名","专业","得分"],s=["account","name","major","score"],o=e.detailInfo,l=e.formatJson(s,o);a(n,l,e.questionnaire.title+"-统计情况")}.bind(null,i)).catch(i.oe)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))}},mounted:function(){this.fetchData(),console.log(123,this.$route.params);var e=this.$route.params.type;1!==e&&(this.tabVisible=!1),console.log(this.$route.params.type)},data:function(){return{questionnaire:{title:"这是一个标题",status:"已完成",startTime:"2020-6-18 19:00:25",endTime:"2020-7-1 20:00:00",fillCount:299},questionList:[],showDetail:!1,detailVisible:!1,tabVisible:!0,selectedTab:"option",detailInfo:[]}}},wa=qa,xa=(i("f4ee"),Object(r["a"])(wa,da,pa,!1,null,"b073cdc6",null)),ka=xa.exports,Ca={name:"Analysis",components:{MainAnalysisList:ka}},$a=Ca,Sa=Object(r["a"])($a,ua,ca,!1,null,"87984e38",null),Ta=Sa.exports,Va=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"done-page"},[i("i",{staticClass:"done-icon el-icon-success"}),i("div",{staticClass:"done-title"},[e._v("发布完成")]),i("div",{staticClass:"done-title"},[e._v(e._s(e.time)+"s后跳转问卷中心...")]),i("div",{staticClass:"done-title"},[e._v("皮一下，广告位招租")])])},Na=[],Ia={data:function(){return{time:5,handler:null}},mounted:function(){var e=this;this.$emit("setActiveBreadItem","bread_post_page"),this.handler=setInterval((function(){e.time--,0==e.time&&(clearInterval(e.handler),e.$router.push({name:"manage_questionnaire_page"}))}),1e3)}},La=Ia,Oa=(i("ebf1"),Object(r["a"])(La,Va,Na,!1,null,"54b04634",null)),Ba=Oa.exports;a["default"].use(Ye["a"]);var Da=Ye["a"].prototype.push;Ye["a"].prototype.push=function(e){return Da.call(this,e).catch((function(e){return e}))};var Ea=[{path:"/",component:st},{path:"/login",component:xt},{path:"/manage",component:Vt,redirect:"/manage/user",children:[{path:"/manage/user",name:"manage_user_page",component:zt},{path:"/manage/questionnaire",name:"manage_questionnaire_page",component:oi},{path:"/manage/statistics",name:"manage_statistics_page",component:pi},{path:"/manage/course",name:"manage_course_page",component:Ei},{path:"/manage/setting",name:"manage_setting_page",component:gi},{path:"/manage/feedback",name:"manage_feedback_page",component:ki},{path:"/manage/help",name:"manage_help_page",component:Ni}]},{path:"/questionnaire",component:Dt,redirect:"/questionnaire/create",children:[{path:"/questionnaire/create",name:"questionnaire_create_page",component:zi},{path:"/questionnaire/edit/:qid",name:"questionnaire_edit_page",component:ia,props:!0},{path:"/questionnaire/fillin/:qid",name:"questionnaire_fillin_page",component:ra,props:!0},{path:"/questionnaire/done",name:"done_page",component:Ba}]},{name:"analyze_page",path:"/analyze/:qid/:type",component:Ta,props:!0}],Aa=new Ye["a"]({routes:Ea});Aa.beforeEach((function(e,t,i){if(-1!=e.path.indexOf("/manage")||-1!=e.path.indexOf("/questionnaire")){var a=Xe.a.get("token");if(a=a||window.localStorage.getItem("token"),console.log(111),console.log(a),!a)return i("/login")}else if("/logout"==e.path)return;i()}));var ja=Aa;a["default"].config.productionTip=!1,new a["default"]({router:ja,render:function(e){return e(c)}}).$mount("#app")},"5c03":function(e,t,i){"use strict";var a=i("961d"),n=i.n(a);n.a},"62a1":function(e,t,i){},7124:function(e,t,i){"use strict";var a=i("4bf4"),n=i.n(a);n.a},"7c70":function(e,t,i){},"85ec":function(e,t,i){},"87f8":function(e,t,i){},"89cc":function(e,t,i){"use strict";var a=i("03aa"),n=i.n(a);n.a},"8a1b":function(e,t,i){},"8a8e":function(e,t,i){"use strict";var a=i("3092"),n=i.n(a);n.a},"961d":function(e,t,i){},"9af1":function(e,t,i){"use strict";var a=i("1bfb"),n=i.n(a);n.a},a0d2:function(e,t,i){"use strict";var a=i("7c70"),n=i.n(a);n.a},a8e4:function(e,t,i){},b04f:function(e,t,i){},b459:function(e,t,i){},d6db:function(e,t,i){"use strict";var a=i("e67a"),n=i.n(a);n.a},e27b:function(e,t,i){"use strict";var a=i("2f01"),n=i.n(a);n.a},e67a:function(e,t,i){},e89a:function(e,t,i){"use strict";var a=i("a8e4"),n=i.n(a);n.a},e8d6:function(e,t,i){"use strict";var a=i("b04f"),n=i.n(a);n.a},ebf1:function(e,t,i){"use strict";var a=i("87f8"),n=i.n(a);n.a},ee5a:function(e,t,i){},f4ee:function(e,t,i){"use strict";var a=i("62a1"),n=i.n(a);n.a},fdc8:function(e,t,i){"use strict";var a=i("b459"),n=i.n(a);n.a}});
//# sourceMappingURL=app.986cd361.js.map